(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{126:function(t,e,i){"use strict";var a=i(46);i.n(a).a},156:function(t,e,i){"use strict";i.r(e);var a=i(3),n=i(17);const o="108.8371912900,34.2032353700",r=[610103,610104,610113];var s={data:()=>({gardens:[],driveRoutes:[],mapObj:null,pathObj:null}),computed:{...Object(a.b)("estate",["getCurArea"])},mounted(){setTimeout(async()=>{await this._initMapScript(),await this._initMapUi(),await this._initGardens(),this._initDriveRoute()},1e3)},methods:{async _initMapScript(){return new Promise((t,e)=>{window.onLoad=async()=>(this._initMapContainer(),t());let i=document.createElement("script");i.charset="utf-8",i.src="https://webapi.amap.com/maps?v=1.4.15&key=17569efbd54a284b8bd0ce338ae71616&callback=onLoad",document.head.appendChild(i)})},_initMapContainer(){let t=this._initLocation(o),e=this._initLocation(this.getCurArea.location);this.mapObj=new AMap.Map("map-container",{zoom:11,center:[(Number(t[0])+Number(e[0]))/2,(Number(t[1])+Number(e[1]))/2],mapStyle:"amap://styles/light"})},async _initMapUi(){return new Promise((t,e)=>{let i=document.createElement("script");i.charset="utf-8",i.src="https://webapi.amap.com/ui/1.0/main.js?v=1.0.11",document.head.appendChild(i);let a=this;i.onload=()=>{AMapUI.loadUI(["overlay/SimpleMarker"],(function(e){return new e({iconTheme:"default",iconStyle:"orange",map:a.mapObj,position:a._initLocation(o),label:{content:"高新软件园",offset:new AMap.Pixel(-10,-20)}}),new e({iconTheme:"default",iconStyle:"orange",map:a.mapObj,position:a._initLocation(a.getCurArea.location),label:{content:a.getCurArea.label,offset:new AMap.Pixel(-10,-20)}}),t()}))}})},_initGardens(){n.a.get(`/xian/aroundGarden?originLocation=${this.getCurArea.location}`).then(t=>{if(200===t.status&&(this.gardens=t.data,this.gardens&&this.gardens.length>0)){let t=this;AMapUI.loadUI(["overlay/SvgMarker"],(function(e){t.gardens.map((i,a)=>{var n=new e.Shape.Circle({height:16,strokeWidth:1,strokeColor:"#fff",fillColor:"#177261"});n.getCenter();new e(n,{map:t.mapObj,position:t._initLocation(i.location),containerClassNames:"shape-Circle",iconLabel:{innerHTML:a+1,style:{color:"#fff",fontSize:"12px"}}})})}))}})},_initPathLns(){let t=this;AMapUI||console.log("AMapUI false",175),AMapUI.load(["ui/misc/PathSimplifier","lib/$"],(function(e,i){let a=new e({zIndex:100,map:t.mapObj,getPath:(t,e)=>t.path,renderOptions:{renderAllPointsIfNumberBelow:100}});a.setData([{name:"路线0",path:[...t.driveRoutes]}]);a.createPathNavigator(0,{loop:!0,speed:5e3})}))},_initDistrict(){let t=this;AMapUI.load(["ui/geo/DistrictExplorer","lib/$"],(function(e){let i=new e({map:t.mapObj});var a=["#3366cc","#dc3912","#ff9900","#aa9900","#ff1901","#aa0101","red","green"];r.map((t,e)=>{i.loadAreaNode(t,(function(t,n){i.renderSubFeatures(n,(function(t,e){return{cursor:"default",bubble:!0,strokeColor:"blue",strokeOpacity:1,strokeWeight:1,fillColor:"red",fillOpacity:.35}})),i.renderParentFeature(n,{cursor:"default",bubble:!0,strokeColor:null,strokeOpacity:1,strokeWeight:1,fillColor:a[e],fillOpacity:.35})}))})}))},_initDriveRoute(){n.a.get(`/xian/drivingRoute?originLocation=${this.getCurArea.location}&destination=${o}`).then(t=>{200===t.status&&t.data.steps&&t.data.steps.length>0&&(t.data.steps.forEach(t=>{if(t.polyline){this._formatPolyline(t.polyline);this.driveRoutes.push(...this._formatPolyline(t.polyline))}}),this._initPathLns())})},_initLocation:t=>t.split(","),_formatPolyline(t){return t.split(";").map(t=>{let e=this._initLocation(t);return[Number(e[0]),Number(e[1])]})}}},l=(i(126),i(5)),c=Object(l.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"map-wrapper"},[t.gardens&&t.gardens.length>0?i("section",{staticClass:"garden"},t._l(t.gardens,(function(e,a){return i("section",{key:a,staticClass:"garden-item"},[i("section",{staticClass:"garden-item-icon"},[t._v(t._s(a+1))]),t._v(" "),i("section",{staticClass:"garden-item-label"},[t._v(t._s(e.name)+",距离"+t._s(e.distance)+"米")])])})),0):t._e(),t._v(" "),i("section",{staticClass:"map-container",attrs:{id:"map-container"}})])}),[],!1,null,"3e811bd6",null);e.default=c.exports},46:function(t,e,i){var a=i(8),n=i(47);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o={insert:"head",singleton:!1},r=a(n,o),s=n.locals?n.locals:{};n.locals||t.hot.accept(47,(function(){var e=i(47);"string"==typeof(e=e.__esModule?e.default:e)&&(e=[[t.i,e,""]]),r(e)})),t.hot.dispose((function(){r()})),t.exports=s},47:function(t,e,i){(e=i(9)(!1)).push([t.i,'.map-con[data-v-3e811bd6]{padding:0 1.333vw 1.333vw;flex:1;display:flex;flex-direction:column;content:"viewport-units-buggyfill; padding: 0px 1.333vw 1.333vw"}.garden[data-v-3e811bd6]{flex-shrink:1;font-size:3.733vw;color:rgba(0,0,0,.8);padding-bottom:2.667vw;max-height:42.667vw;overflow:scroll;content:"viewport-units-buggyfill; font-size: 3.733vw; padding-bottom: 2.667vw; max-height: 42.667vw"}.garden-item[data-v-3e811bd6]{line-height:6.933vw;display:flex;content:"viewport-units-buggyfill; line-height: 6.933vw"}.garden-item-icon[data-v-3e811bd6]{width:5.333vw;background:#177261;color:#fff;border-radius:50%;text-align:center;height:5.333vw;line-height:5.333vw;margin:.8vw 2.667vw;content:"viewport-units-buggyfill; width: 5.333vw; height: 5.333vw; line-height: 5.333vw; margin: 0.8vw 2.667vw"}.map-container[data-v-3e811bd6]{width:100%;flex:1;overflow:scroll;position:relative}.amap-markers[data-v-3e811bd6]{overflow:visible!important}',""]),t.exports=e}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMveGlhbi1lc3RhdGUvYXJlYS1tYXAudnVlPzg1YTkiLCJ3ZWJwYWNrOi8vLy4vc3JjL3hpYW4tZXN0YXRlL2FyZWEtbWFwLnZ1ZT9iY2M3Iiwid2VicGFjazovLy9zcmMveGlhbi1lc3RhdGUvYXJlYS1tYXAudnVlIiwid2VicGFjazovLy8uL3NyYy94aWFuLWVzdGF0ZS9hcmVhLW1hcC52dWU/ZjUxZCIsIndlYnBhY2s6Ly8vLi9zcmMveGlhbi1lc3RhdGUvYXJlYS1tYXAudnVlIiwid2VicGFjazovLy8uL3NyYy94aWFuLWVzdGF0ZS9hcmVhLW1hcC52dWU/YzIyNSIsIndlYnBhY2s6Ly8vLi9zcmMveGlhbi1lc3RhdGUvYXJlYS1tYXAudnVlP2QzNGQiXSwibmFtZXMiOlsiZ3hfbG9jYXRpb24iLCJkaXNwbGF5U3RyaWN0Q29kZSIsImNvbXBvbmVudCIsIl92bSIsInRoaXMiLCJfaCIsIiRjcmVhdGVFbGVtZW50IiwiX2MiLCJfc2VsZiIsInN0YXRpY0NsYXNzIiwiZ2FyZGVucyIsImxlbmd0aCIsIl9sIiwiZ2FyZGVuIiwia2V5IiwiX3YiLCJfcyIsIm5hbWUiLCJkaXN0YW5jZSIsIl9lIiwiYXR0cnMiLCJhcGkiLCJjb250ZW50IiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJtb2R1bGUiLCJpIiwib3B0aW9ucyIsInVwZGF0ZSIsImV4cG9ydGVkIiwibG9jYWxzIiwiaG90IiwiYWNjZXB0IiwibmV3Q29udGVudCIsImRpc3Bvc2UiLCJleHBvcnRzIiwiX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIiwicHVzaCJdLCJtYXBwaW5ncyI6IjJGQUFBLG1CQUE0WixHLHdDQ0E1WixJLGVDZ0JBLE1BQ01BLEVBQWMsK0JBQ2RDLEVBQW9CLENBQzFCLE9BQ0EsT0FDQSxRQUtBLElDMUJ3TCxFRDBCeEwsQ0FDRSxLQUFGLEtBQ0EsQ0FDTSxRQUFOLEdBQ00sWUFBTixHQUNNLE9BQU4sS0FDTSxRQUFOLE9BR0UsU0FBRixJQUNB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QUFJWSxHQUFHWixFQUFJYSxHQUFHRixFQUFNLE1BQU1YLEVBQUlZLEdBQUcsS0FBS1IsRUFBRyxVQUFVLENBQUNFLFlBQVkscUJBQXFCLENBQUNOLEVBQUlZLEdBQUdaLEVBQUlhLEdBQUdILEVBQU9JLE1BQU0sTUFBTWQsRUFBSWEsR0FBR0gsRUFBT0ssVUFBVSxZQUFXLEdBQUdmLEVBQUlnQixLQUFLaEIsRUFBSVksR0FBRyxLQUFLUixFQUFHLFVBQVUsQ0FBQ0UsWUFBWSxnQkFBZ0JXLE1BQU0sQ0FBQyxHQUFLLHVCQUN0akIsSUdXcEIsRUFDQSxLQUNBLFdBQ0EsTUFJYSxVQUFBbEIsRSw0QkNuQmYsSUFBSW1CLEVBQU0sRUFBUSxHQUNGQyxFQUFVLEVBQVEsSUFJQyxpQkFGdkJBLEVBQVVBLEVBQVFDLFdBQWFELEVBQVFFLFFBQVVGLEtBRy9DQSxFQUFVLENBQUMsQ0FBQ0csRUFBT0MsRUFBSUosRUFBUyxNQUc5QyxJQUFJSyxFQUFVLENBRWQsT0FBaUIsT0FDakIsV0FBb0IsR0FFaEJDLEVBQVNQLEVBQUlDLEVBQVNLLEdBRXRCRSxFQUFXUCxFQUFRUSxPQUFTUixFQUFRUSxPQUFTLEdBSTFDUixFQUFRUSxRQUNYTCxFQUFPTSxJQUFJQyxPQUNULElBQ0EsV0FDRSxJQUFJQyxFQUFhLEVBQVEsSUFJTyxpQkFGMUJBLEVBQWFBLEVBQVdWLFdBQWFVLEVBQVdULFFBQVVTLEtBR3hEQSxFQUFhLENBQUMsQ0FBQ1IsRUFBT0MsRUFBSU8sRUFBWSxNQUd4Q0wsRUFBT0ssTUFLbkJSLEVBQU9NLElBQUlHLFNBQVEsV0FDakJOLE9BSUpILEVBQU9VLFFBQVVOLEcsb0JDeENqQk0sRUFEa0MsRUFBUSxFQUNoQ0MsRUFBNEIsSUFFOUJDLEtBQUssQ0FBQ1osRUFBT0MsRUFBSSxrN0JBQTI3QixLQUVwOUJELEVBQU9VLFFBQVVBIiwiZmlsZSI6ImF3YXJkX2Rpc3QvMjUuNTU1NTgyNDFjNTJmYmJlOWZlMDEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9kIGZyb20gXCItIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2xvYWRlcnMvc3R5bGVQb3N0TG9hZGVyLmpzIS4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vYXJlYS1tYXAudnVlP3Z1ZSZ0eXBlPXN0eWxlJmluZGV4PTAmaWQ9M2U4MTFiZDYmbGFuZz1zY3NzJnNjb3BlZD10cnVlJlwiOyBleHBvcnQgZGVmYXVsdCBtb2Q7IGV4cG9ydCAqIGZyb20gXCItIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2xvYWRlcnMvc3R5bGVQb3N0TG9hZGVyLmpzIS4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vYXJlYS1tYXAudnVlP3Z1ZSZ0eXBlPXN0eWxlJmluZGV4PTAmaWQ9M2U4MTFiZDYmbGFuZz1zY3NzJnNjb3BlZD10cnVlJlwiIiwidmFyIHJlbmRlciA9IGZ1bmN0aW9uICgpIHt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoJ2Rpdicse3N0YXRpY0NsYXNzOlwibWFwLXdyYXBwZXJcIn0sWyhfdm0uZ2FyZGVucyAmJiBfdm0uZ2FyZGVucy5sZW5ndGggPiAwKT9fYygnc2VjdGlvbicse3N0YXRpY0NsYXNzOlwiZ2FyZGVuXCJ9LF92bS5fbCgoX3ZtLmdhcmRlbnMpLGZ1bmN0aW9uKGdhcmRlbixrZXkpe3JldHVybiBfYygnc2VjdGlvbicse2tleTprZXksc3RhdGljQ2xhc3M6XCJnYXJkZW4taXRlbVwifSxbX2MoJ3NlY3Rpb24nLHtzdGF0aWNDbGFzczpcImdhcmRlbi1pdGVtLWljb25cIn0sW192bS5fdihfdm0uX3Moa2V5ICsgMSkpXSksX3ZtLl92KFwiIFwiKSxfYygnc2VjdGlvbicse3N0YXRpY0NsYXNzOlwiZ2FyZGVuLWl0ZW0tbGFiZWxcIn0sW192bS5fdihfdm0uX3MoZ2FyZGVuLm5hbWUpK1wiLOi3neemu1wiK192bS5fcyhnYXJkZW4uZGlzdGFuY2UpK1wi57GzXCIpXSldKX0pLDApOl92bS5fZSgpLF92bS5fdihcIiBcIiksX2MoJ3NlY3Rpb24nLHtzdGF0aWNDbGFzczpcIm1hcC1jb250YWluZXJcIixhdHRyczp7XCJpZFwiOlwibWFwLWNvbnRhaW5lclwifX0pXSl9XG52YXIgc3RhdGljUmVuZGVyRm5zID0gW11cblxuZXhwb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfSIsIjx0ZW1wbGF0ZT5cbiAgICA8ZGl2IGNsYXNzPVwibWFwLXdyYXBwZXJcIj5cbiAgICAgICAgPHNlY3Rpb24gY2xhc3M9XCJnYXJkZW5cIiB2LWlmPVwiZ2FyZGVucyAmJiBnYXJkZW5zLmxlbmd0aCA+IDBcIj5cbiAgICAgICAgICAgIDxzZWN0aW9uIHYtZm9yPVwiKGdhcmRlbiwga2V5KSBpbiBnYXJkZW5zXCIgOmtleT1cImtleVwiIGNsYXNzPVwiZ2FyZGVuLWl0ZW1cIj5cbiAgICAgICAgICAgICAgICA8c2VjdGlvbiBjbGFzcz1cImdhcmRlbi1pdGVtLWljb25cIj57eyBrZXkgKyAxIH19PC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgIDxzZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZ2FyZGVuLWl0ZW0tbGFiZWxcIlxuICAgICAgICAgICAgICAgID57eyBnYXJkZW4ubmFtZSB9fSzot53nprt7eyBnYXJkZW4uZGlzdGFuY2UgfX3nsbM8L3NlY3Rpb24+XG4gICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgPHNlY3Rpb24gY2xhc3M9XCJtYXAtY29udGFpbmVyXCIgaWQ9XCJtYXAtY29udGFpbmVyXCI+PC9zZWN0aW9uPlxuICAgIDwvZGl2PlxuPC90ZW1wbGF0ZT5cbjxzY3JpcHQ+XG5pbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSBcInZ1ZXhcIjtcbmltcG9ydCByZXF1ZXN0IGZyb20gJ3JlcXVlc3QnO1xuY29uc3QgR0RLRVkgPSBcIjE3NTY5ZWZiZDU0YTI4NGI4YmQwY2UzMzhhZTcxNjE2XCI7XG5jb25zdCBneF9sb2NhdGlvbiA9IFwiMTA4LjgzNzE5MTI5MDAsMzQuMjAzMjM1MzcwMFwiOyAvL+mrmOaWsOi9r+S7tuWbree7j+e6rOW6plxuY29uc3QgZGlzcGxheVN0cmljdENvZGUgPSBbXG4gICAgNjEwMTAzLFxuICAgIDYxMDEwNCxcbiAgICA2MTAxMTNcbiAgICAvLyAgIDYxMDExNixcbiAgICAvLyA2MTAxMjRcbl07IC8v56KR5p6X5Yy677yM6I6y5rmW5Yy677yM6ZuB5aGU5Yy677yM6ZW/5a6J5Yy677yM5ZGo6Iez5Y6/XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBkYXRhKCl7XG4gICAgICAgIHJldHVybntcbiAgICAgICAgICAgIGdhcmRlbnM6W10sICAgICAgICAgICAgXG4gICAgICAgICAgICBkcml2ZVJvdXRlczogW10sXG4gICAgICAgICAgICBtYXBPYmo6IG51bGwsXG4gICAgICAgICAgICBwYXRoT2JqOiBudWxsXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGNvbXB1dGVkOntcbiAgICAgICAgLi4ubWFwR2V0dGVycygnZXN0YXRlJyxbJ2dldEN1ckFyZWEnXSlcbiAgICB9LFxuICAgIG1vdW50ZWQoKXtcbiAgICAgICAgc2V0VGltZW91dChhc3luYyAoKT0+e1xuICAgICAgICBcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2luaXRNYXBTY3JpcHQoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2luaXRNYXBVaSgpO1xuXG4gICAgICAgICAgICAvLyB0aGlzLl9pbml0RGlzdHJpY3QoKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5faW5pdEdhcmRlbnMoKTtcbiAgICAgICAgICAgIC8vIHRoaXMuX2luaXRQYXRoTG5zKCk7XG5cbiAgICAgICAgICAgIHRoaXMuX2luaXREcml2ZVJvdXRlKCk7XG4gICAgICAgIH0sMTAwMClcblxuICAgIH0sXG4gICAgbWV0aG9kczp7XG4gICAgICAgIGFzeW5jIF9pbml0TWFwU2NyaXB0KCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICB3aW5kb3cub25Mb2FkID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbml0TWFwQ29udGFpbmVyKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBsZXQgbWFwU2NyaXB0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgICAgIG1hcFNjcmlwdEVsLmNoYXJzZXQgPSBcInV0Zi04XCI7XG4gICAgICAgICAgICAgICAgbWFwU2NyaXB0RWwuc3JjID0gYGh0dHBzOi8vd2ViYXBpLmFtYXAuY29tL21hcHM/dj0xLjQuMTUma2V5PSR7R0RLRVl9JmNhbGxiYWNrPW9uTG9hZGA7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChtYXBTY3JpcHRFbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgX2luaXRNYXBDb250YWluZXIoKSB7XG4gICAgICAgICAgICBsZXQgZ3hfbG9jYXRpb25fbnVtID0gdGhpcy5faW5pdExvY2F0aW9uKGd4X2xvY2F0aW9uKTtcbiAgICAgICAgICAgIGxldCBkZXNfbG9jYXRpb25fbnVtID0gdGhpcy5faW5pdExvY2F0aW9uKHRoaXMuZ2V0Q3VyQXJlYS5sb2NhdGlvbik7XG4gICAgICAgICAgICB0aGlzLm1hcE9iaiA9IG5ldyBBTWFwLk1hcChcIm1hcC1jb250YWluZXJcIiwge1xuICAgICAgICAgICAgICAgIHpvb206IDExLFxuICAgICAgICAgICAgICAgIGNlbnRlcjogW1xuICAgICAgICAgICAgICAgICAgICAoTnVtYmVyKGd4X2xvY2F0aW9uX251bVswXSkgKyBOdW1iZXIoZGVzX2xvY2F0aW9uX251bVswXSkpIC9cbiAgICAgICAgICAgICAgICAgICAgICAgIDIsXG4gICAgICAgICAgICAgICAgICAgIChOdW1iZXIoZ3hfbG9jYXRpb25fbnVtWzFdKSArIE51bWJlcihkZXNfbG9jYXRpb25fbnVtWzFdKSkgL1xuICAgICAgICAgICAgICAgICAgICAgICAgMlxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgbWFwU3R5bGU6IFwiYW1hcDovL3N0eWxlcy9saWdodFwiIC8v6K6+572u5Zyw5Zu+55qE5pi+56S65qC35byPXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBhc3luYyBfaW5pdE1hcFVpKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBnZCBzY3JpcHQgdWnlvJXlhaVcbiAgICAgICAgICAgICAgICBsZXQgdWlTY3JpcHRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICAgICAgdWlTY3JpcHRFbC5jaGFyc2V0ID0gXCJ1dGYtOFwiO1xuICAgICAgICAgICAgICAgIHVpU2NyaXB0RWwuc3JjID0gJ2h0dHBzOi8vd2ViYXBpLmFtYXAuY29tL3VpLzEuMC9tYWluLmpzP3Y9MS4wLjExJztcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHVpU2NyaXB0RWwpO1xuICAgICAgICAgICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICAgICB1aVNjcmlwdEVsLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8g6LW354K55ZKM57uI54K55qCH5rOoXG4gICAgICAgICAgICAgICAgICAgIEFNYXBVSS5sb2FkVUkoW1wib3ZlcmxheS9TaW1wbGVNYXJrZXJcIl0sIGZ1bmN0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgU2ltcGxlTWFya2VyXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFNpbXBsZU1hcmtlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblRoZW1lOiBcImRlZmF1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uU3R5bGU6IFwib3JhbmdlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwOiB0aGF0Lm1hcE9iaixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogdGhhdC5faW5pdExvY2F0aW9uKGd4X2xvY2F0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBcIumrmOaWsOi9r+S7tuWbrVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IG5ldyBBTWFwLlBpeGVsKC0xMCwgLTIwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgU2ltcGxlTWFya2VyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uVGhlbWU6IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25TdHlsZTogXCJvcmFuZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXA6IHRoYXQubWFwT2JqLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB0aGF0Ll9pbml0TG9jYXRpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZ2V0Q3VyQXJlYS5sb2NhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogdGhhdC5nZXRDdXJBcmVhLmxhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IG5ldyBBTWFwLlBpeGVsKC0xMCwgLTIwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIOi3r+W+hOagh+azqFxuICAgICAgICAgICAgICAgICAgICAvLyAgIHRoaXMuX2luaXRQYXRoTG5zKCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvLyDlsZXnpLrlkajovrnlhazlm61cbiAgICAgICAgX2luaXRHYXJkZW5zKCkge1xuICAgICAgICAgICAgcmVxdWVzdFxuICAgICAgICAgICAgICAgIC5nZXQoXG4gICAgICAgICAgICAgICAgICAgIGAveGlhbi9hcm91bmRHYXJkZW4/b3JpZ2luTG9jYXRpb249JHt0aGlzLmdldEN1ckFyZWEubG9jYXRpb259YFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdhcmRlbnMgPSByZXMuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdhcmRlbnMgJiYgdGhpcy5nYXJkZW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQU1hcFVJLmxvYWRVSShbXCJvdmVybGF5L1N2Z01hcmtlclwiXSwgZnVuY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN2Z01hcmtlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmdhcmRlbnMubWFwKChnYXJkZW4sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2hhcGUgPSBuZXcgU3ZnTWFya2VyLlNoYXBlW1wiQ2lyY2xlXCJdKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDE2LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUNvbG9yOiBcIiNmZmZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6IFwiIzE3NzI2MVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsYWJlbENlbnRlciA9IHNoYXBlLmdldENlbnRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFN2Z01hcmtlcihzaGFwZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcDogdGhhdC5tYXBPYmosXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHRoYXQuX2luaXRMb2NhdGlvbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FyZGVuLmxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJDbGFzc05hbWVzOiBcInNoYXBlLUNpcmNsZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25MYWJlbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbm5lckhUTUw6IGluZGV4ICsgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIiNmZmZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcIjEycHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNob3dQb3NpdGlvblBvaW50OiB0cnVlLC8v5piv5ZCm5pi+56S6bWFya2Vy5LiK55qE57qi54K5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyDlvIDovabot6/nur/lm77moLflvI9cbiAgICAgICAgX2luaXRQYXRoTG5zKCkge1xuICAgICAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgaWYoIUFNYXBVSSl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0FNYXBVSSBmYWxzZScsMTc1KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQU1hcFVJLmxvYWQoW1widWkvbWlzYy9QYXRoU2ltcGxpZmllclwiLCBcImxpYi8kXCJdLCBmdW5jdGlvbihcbiAgICAgICAgICAgICAgICBQYXRoU2ltcGxpZmllcixcbiAgICAgICAgICAgICAgICAkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBsZXQgcGF0aE9iaiA9IG5ldyBQYXRoU2ltcGxpZmllcih7XG4gICAgICAgICAgICAgICAgICAgIHpJbmRleDogMTAwLFxuICAgICAgICAgICAgICAgICAgICBtYXA6IHRoYXQubWFwT2JqLFxuXG4gICAgICAgICAgICAgICAgICAgIGdldFBhdGg6IChwYXRoRGF0YSwgcGF0aEluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGF0aERhdGEucGF0aDtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyQWxsUG9pbnRzSWZOdW1iZXJCZWxvdzogMTAwXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwYXRoT2JqLnNldERhdGEoW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIui3r+e6vzBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi50aGF0LmRyaXZlUm91dGVzXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgbGV0IG5hdmcxID0gcGF0aE9iai5jcmVhdGVQYXRoTmF2aWdhdG9yKDAsIHtcbiAgICAgICAgICAgICAgICAgICAgbG9vcDogdHJ1ZSwgLy/lvqrnjq/mkq3mlL5cbiAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IDUwMDAgLy/lt6HoiKrpgJ/luqbvvIzljZXkvY3ljYPnsbMv5bCP5pe2XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBuYXZnMS5zdGFydCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIOWxleekuuWMuuWfn1xuICAgICAgICBfaW5pdERpc3RyaWN0KCkge1xuICAgICAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgQU1hcFVJLmxvYWQoW1widWkvZ2VvL0Rpc3RyaWN0RXhwbG9yZXJcIiwgXCJsaWIvJFwiXSwgZnVuY3Rpb24oXG4gICAgICAgICAgICAgICAgRGlzdHJpY3RFeHBsb3JlclxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRpc3RyaWN0RXhwbG9yZXIgPSBuZXcgRGlzdHJpY3RFeHBsb3Jlcih7XG4gICAgICAgICAgICAgICAgICAgIG1hcDogdGhhdC5tYXBPYmogLy/lhbPogZTnmoTlnLDlm77lrp7kvotcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgY29sb3JzID0gW1xuICAgICAgICAgICAgICAgICAgICBcIiMzMzY2Y2NcIixcbiAgICAgICAgICAgICAgICAgICAgXCIjZGMzOTEyXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiI2ZmOTkwMFwiLFxuICAgICAgICAgICAgICAgICAgICBcIiNhYTk5MDBcIixcbiAgICAgICAgICAgICAgICAgICAgXCIjZmYxOTAxXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiI2FhMDEwMVwiLFxuICAgICAgICAgICAgICAgICAgICBcInJlZFwiLFxuICAgICAgICAgICAgICAgICAgICBcImdyZWVuXCJcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIGRpc3BsYXlTdHJpY3RDb2RlLm1hcCgoY29kZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZGlzdHJpY3RFeHBsb3Jlci5sb2FkQXJlYU5vZGUoY29kZSwgZnVuY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZWFOb2RlXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzdHJpY3RFeHBsb3Jlci5yZW5kZXJTdWJGZWF0dXJlcyhhcmVhTm9kZSwgZnVuY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWJibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUNvbG9yOiBcImJsdWVcIiwgLy/nur/popzoibJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlT3BhY2l0eTogMSwgLy/nur/pgI/mmI7luqZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2VpZ2h0OiAxLCAvL+e6v+WuvVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6IFwicmVkXCIsIC8v5aGr5YWF6ImyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjM1IC8v5aGr5YWF6YCP5piO5bqmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzdHJpY3RFeHBsb3Jlci5yZW5kZXJQYXJlbnRGZWF0dXJlKGFyZWFOb2RlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBcImRlZmF1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWJibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlQ29sb3I6IG51bGwsIC8v57q/6aKc6ImyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlT3BhY2l0eTogMSwgLy/nur/pgI/mmI7luqZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXZWlnaHQ6IDEsIC8v57q/5a69XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiBjb2xvcnNbaW5kZXhdLCAvL+Whq+WFheiJslxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjM1IC8v5aGr5YWF6YCP5piO5bqmXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8vIOWIneWni+WMlumpvui9pui3r+e6v+aVsOaNrlxuICAgICAgICBfaW5pdERyaXZlUm91dGUoKSB7XG4gICAgICAgICAgICByZXF1ZXN0XG4gICAgICAgICAgICAgICAgLmdldChcbiAgICAgICAgICAgICAgICAgICAgYC94aWFuL2RyaXZpbmdSb3V0ZT9vcmlnaW5Mb2NhdGlvbj0ke3RoaXMuZ2V0Q3VyQXJlYS5sb2NhdGlvbn0mZGVzdGluYXRpb249JHtneF9sb2NhdGlvbn1gXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGVwcyAmJiByZXMuZGF0YS5zdGVwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmRhdGEuc3RlcHMuZm9yRWFjaChzdGVwID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0ZXAucG9seWxpbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhcnJMb2NhdGlvbiA9IHRoaXMuX2Zvcm1hdFBvbHlsaW5lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAucG9seWxpbmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyaXZlUm91dGVzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5fZm9ybWF0UG9seWxpbmUoc3RlcC5wb2x5bGluZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbml0UGF0aExucygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8g6L6F5Yqp5Ye95pWwXG4gICAgICAgIF9pbml0TG9jYXRpb24obG9jYXRpb25TdHIpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvblN0ci5zcGxpdChcIixcIik7XG4gICAgICAgIH0sXG4gICAgICAgIF9mb3JtYXRQb2x5bGluZShwb2x5bGluZSkge1xuICAgICAgICAgICAgbGV0IGxvY2F0aW9uU3RyID0gcG9seWxpbmUuc3BsaXQoXCI7XCIpO1xuICAgICAgICAgICAgbGV0IGxvY2F0aW9uQXJyID0gbG9jYXRpb25TdHIubWFwKGxvY2F0aW9uID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgbG9jYXRpb25JdGVtID0gdGhpcy5faW5pdExvY2F0aW9uKGxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gW051bWJlcihsb2NhdGlvbkl0ZW1bMF0pLCBOdW1iZXIobG9jYXRpb25JdGVtWzFdKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbkFycjtcbiAgICAgICAgfSxcbiAgICB9XG59XG48L3NjcmlwdD5cbjxzdHlsZSBsYW5nPVwic2Nzc1wiIHNjb3BlZD5cbi5tYXAtY29uIHtcbiAgICBwYWRkaW5nOiAwcHggNXB4IDVweDtcbiAgICBmbGV4OiAxO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbn1cbi5nYXJkZW4ge1xuICAgIGZsZXgtc2hyaW5rOiAxO1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjgpO1xuICAgIHBhZGRpbmctYm90dG9tOiAxMHB4O1xuICAgIG1heC1oZWlnaHQ6IDE2MHB4OyAgICBcbiAgICBvdmVyZmxvdzogc2Nyb2xsO1xuICAgICYtaXRlbSB7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAyNnB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgIH1cbiAgICAmLWl0ZW0taWNvbiB7XG4gICAgICAgIHdpZHRoOiAyMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiAjMTc3MjYxO1xuICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAxKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIGhlaWdodDogMjBweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDIwcHg7XG4gICAgICAgIG1hcmdpbjogM3B4IDEwcHg7XG4gICAgfVxuICAgICYtaXRlbS1sYWJlbCB7XG4gICAgfVxufVxuLm1hcC1jb250YWluZXIge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGZsZXg6IDE7XG4gICAgb3ZlcmZsb3c6IHNjcm9sbDtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG4uYW1hcC1tYXJrZXJzIHtcbiAgICAvKiBib3JkZXI6IDFweCBibGFjayBzb2xpZCAhaW1wb3J0YW50OyAqL1xuICAgIG92ZXJmbG93OiB2aXNpYmxlICFpbXBvcnRhbnQ7XG59XG48L3N0eWxlPiIsImltcG9ydCBtb2QgZnJvbSBcIi0hLi4vLi4vbm9kZV9tb2R1bGVzL2JhYmVsLWxvYWRlci9saWIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9hcmVhLW1hcC52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9anMmXCI7IGV4cG9ydCBkZWZhdWx0IG1vZDsgZXhwb3J0ICogZnJvbSBcIi0hLi4vLi4vbm9kZV9tb2R1bGVzL2JhYmVsLWxvYWRlci9saWIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9hcmVhLW1hcC52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9anMmXCIiLCJpbXBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9IGZyb20gXCIuL2FyZWEtbWFwLnZ1ZT92dWUmdHlwZT10ZW1wbGF0ZSZpZD0zZTgxMWJkNiZzY29wZWQ9dHJ1ZSZcIlxuaW1wb3J0IHNjcmlwdCBmcm9tIFwiLi9hcmVhLW1hcC52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9anMmXCJcbmV4cG9ydCAqIGZyb20gXCIuL2FyZWEtbWFwLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIlxuaW1wb3J0IHN0eWxlMCBmcm9tIFwiLi9hcmVhLW1hcC52dWU/dnVlJnR5cGU9c3R5bGUmaW5kZXg9MCZpZD0zZTgxMWJkNiZsYW5nPXNjc3Mmc2NvcGVkPXRydWUmXCJcblxuXG4vKiBub3JtYWxpemUgY29tcG9uZW50ICovXG5pbXBvcnQgbm9ybWFsaXplciBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9ydW50aW1lL2NvbXBvbmVudE5vcm1hbGl6ZXIuanNcIlxudmFyIGNvbXBvbmVudCA9IG5vcm1hbGl6ZXIoXG4gIHNjcmlwdCxcbiAgcmVuZGVyLFxuICBzdGF0aWNSZW5kZXJGbnMsXG4gIGZhbHNlLFxuICBudWxsLFxuICBcIjNlODExYmQ2XCIsXG4gIG51bGxcbiAgXG4pXG5cbmV4cG9ydCBkZWZhdWx0IGNvbXBvbmVudC5leHBvcnRzIiwidmFyIGFwaSA9IHJlcXVpcmUoXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvbG9hZGVycy9zdHlsZVBvc3RMb2FkZXIuanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9hcmVhLW1hcC52dWU/dnVlJnR5cGU9c3R5bGUmaW5kZXg9MCZpZD0zZTgxMWJkNiZsYW5nPXNjc3Mmc2NvcGVkPXRydWUmXCIpO1xuXG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5fX2VzTW9kdWxlID8gY29udGVudC5kZWZhdWx0IDogY29udGVudDtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4gICAgICAgICAgICB9XG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG52YXIgZXhwb3J0ZWQgPSBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDoge307XG5cblxuaWYgKG1vZHVsZS5ob3QpIHtcbiAgaWYgKCFjb250ZW50LmxvY2Fscykge1xuICAgIG1vZHVsZS5ob3QuYWNjZXB0KFxuICAgICAgXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9sb2FkZXJzL3N0eWxlUG9zdExvYWRlci5qcyEuLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL2FyZWEtbWFwLnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0wJmlkPTNlODExYmQ2Jmxhbmc9c2NzcyZzY29wZWQ9dHJ1ZSZcIixcbiAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvbG9hZGVycy9zdHlsZVBvc3RMb2FkZXIuanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9hcmVhLW1hcC52dWU/dnVlJnR5cGU9c3R5bGUmaW5kZXg9MCZpZD0zZTgxMWJkNiZsYW5nPXNjc3Mmc2NvcGVkPXRydWUmXCIpO1xuXG4gICAgICAgICAgICAgIG5ld0NvbnRlbnQgPSBuZXdDb250ZW50Ll9fZXNNb2R1bGUgPyBuZXdDb250ZW50LmRlZmF1bHQgOiBuZXdDb250ZW50O1xuXG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB1cGRhdGUobmV3Q29udGVudCk7XG4gICAgICB9XG4gICAgKVxuICB9XG5cbiAgbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyBcbiAgICB1cGRhdGUoKTtcbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0ZWQ7IiwiLy8gSW1wb3J0c1xudmFyIF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpO1xuZXhwb3J0cyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhmYWxzZSk7XG4vLyBNb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5tYXAtY29uW2RhdGEtdi0zZTgxMWJkNl17cGFkZGluZzowIDEuMzMzdncgMS4zMzN2dztmbGV4OjE7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtjb250ZW50OlxcXCJ2aWV3cG9ydC11bml0cy1idWdneWZpbGw7IHBhZGRpbmc6IDBweCAxLjMzM3Z3IDEuMzMzdndcXFwifS5nYXJkZW5bZGF0YS12LTNlODExYmQ2XXtmbGV4LXNocmluazoxO2ZvbnQtc2l6ZTozLjczM3Z3O2NvbG9yOnJnYmEoMCwwLDAsLjgpO3BhZGRpbmctYm90dG9tOjIuNjY3dnc7bWF4LWhlaWdodDo0Mi42Njd2dztvdmVyZmxvdzpzY3JvbGw7Y29udGVudDpcXFwidmlld3BvcnQtdW5pdHMtYnVnZ3lmaWxsOyBmb250LXNpemU6IDMuNzMzdnc7IHBhZGRpbmctYm90dG9tOiAyLjY2N3Z3OyBtYXgtaGVpZ2h0OiA0Mi42Njd2d1xcXCJ9LmdhcmRlbi1pdGVtW2RhdGEtdi0zZTgxMWJkNl17bGluZS1oZWlnaHQ6Ni45MzN2dztkaXNwbGF5OmZsZXg7Y29udGVudDpcXFwidmlld3BvcnQtdW5pdHMtYnVnZ3lmaWxsOyBsaW5lLWhlaWdodDogNi45MzN2d1xcXCJ9LmdhcmRlbi1pdGVtLWljb25bZGF0YS12LTNlODExYmQ2XXt3aWR0aDo1LjMzM3Z3O2JhY2tncm91bmQ6IzE3NzI2MTtjb2xvcjojZmZmO2JvcmRlci1yYWRpdXM6NTAlO3RleHQtYWxpZ246Y2VudGVyO2hlaWdodDo1LjMzM3Z3O2xpbmUtaGVpZ2h0OjUuMzMzdnc7bWFyZ2luOi44dncgMi42Njd2dztjb250ZW50OlxcXCJ2aWV3cG9ydC11bml0cy1idWdneWZpbGw7IHdpZHRoOiA1LjMzM3Z3OyBoZWlnaHQ6IDUuMzMzdnc7IGxpbmUtaGVpZ2h0OiA1LjMzM3Z3OyBtYXJnaW46IDAuOHZ3IDIuNjY3dndcXFwifS5tYXAtY29udGFpbmVyW2RhdGEtdi0zZTgxMWJkNl17d2lkdGg6MTAwJTtmbGV4OjE7b3ZlcmZsb3c6c2Nyb2xsO3Bvc2l0aW9uOnJlbGF0aXZlfS5hbWFwLW1hcmtlcnNbZGF0YS12LTNlODExYmQ2XXtvdmVyZmxvdzp2aXNpYmxlIWltcG9ydGFudH1cIiwgXCJcIl0pO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==