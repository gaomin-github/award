(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{70:function(e,t,r){"use strict";function s(e){throw new Error(e)}e.exports=function(e){e.OBJLoader=function(t){this.manager=void 0!==t?t:e.DefaultLoadingManager,this.materials=null,this.regexp={vertex_pattern:/^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,normal_pattern:/^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,uv_pattern:/^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,face_vertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,face_vertex_uv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,face_vertex_uv_normal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,face_vertex_normal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,object_pattern:/^[og]\s*(.+)?/,smoothing_pattern:/^s\s+(\d+|on|off)/,material_library_pattern:/^mtllib /,material_use_pattern:/^usemtl /}},e.OBJLoader.prototype={constructor:e.OBJLoader,load:function(t,r,i,a){var n=this;this.onError=a||s;var o=new e.FileLoader(n.manager);o.setPath(this.path),o.load(t,(function(e){r(n.parse(e))}),i,a)},setPath:function(e){this.path=e},setMaterials:function(e){this.materials=e},_createParserState:function(){var e={objects:[],object:{},vertices:[],normals:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var r=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);var s={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==r?r.smooth:this.smooth,groupStart:void 0!==r?r.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(s),s},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},r&&r.name&&"function"==typeof r.clone){var s=r.clone(0);s.inherited=!0,this.object.materials.push(s)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseNormalIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseUVIndex:function(e,t){var r=parseInt(e,10);return 2*(r>=0?r-1:r+t/2)},addVertex:function(e,t,r){var s=this.vertices,i=this.object.geometry.vertices;i.push(s[e+0]),i.push(s[e+1]),i.push(s[e+2]),i.push(s[t+0]),i.push(s[t+1]),i.push(s[t+2]),i.push(s[r+0]),i.push(s[r+1]),i.push(s[r+2])},addVertexLine:function(e){var t=this.vertices,r=this.object.geometry.vertices;r.push(t[e+0]),r.push(t[e+1]),r.push(t[e+2])},addNormal:function(e,t,r){var s=this.normals,i=this.object.geometry.normals;i.push(s[e+0]),i.push(s[e+1]),i.push(s[e+2]),i.push(s[t+0]),i.push(s[t+1]),i.push(s[t+2]),i.push(s[r+0]),i.push(s[r+1]),i.push(s[r+2])},addUV:function(e,t,r){var s=this.uvs,i=this.object.geometry.uvs;i.push(s[e+0]),i.push(s[e+1]),i.push(s[t+0]),i.push(s[t+1]),i.push(s[r+0]),i.push(s[r+1])},addUVLine:function(e){var t=this.uvs,r=this.object.geometry.uvs;r.push(t[e+0]),r.push(t[e+1])},addFace:function(e,t,r,s,i,a,n,o,h,l,d,u){var p,c=this.vertices.length,m=this.parseVertexIndex(e,c),f=this.parseVertexIndex(t,c),v=this.parseVertexIndex(r,c);if(void 0===s?this.addVertex(m,f,v):(p=this.parseVertexIndex(s,c),this.addVertex(m,f,p),this.addVertex(f,v,p)),void 0!==i){var g=this.uvs.length;m=this.parseUVIndex(i,g),f=this.parseUVIndex(a,g),v=this.parseUVIndex(n,g),void 0===s?this.addUV(m,f,v):(p=this.parseUVIndex(o,g),this.addUV(m,f,p),this.addUV(f,v,p))}if(void 0!==h){var x=this.normals.length;m=this.parseNormalIndex(h,x),f=h===l?m:this.parseNormalIndex(l,x),v=h===d?m:this.parseNormalIndex(d,x),void 0===s?this.addNormal(m,f,v):(p=this.parseNormalIndex(u,x),this.addNormal(m,f,p),this.addNormal(f,v,p))}},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var r=this.vertices.length,s=this.uvs.length,i=0,a=e.length;i<a;i++)this.addVertexLine(this.parseVertexIndex(e[i],r));var n=0;for(a=t.length;n<a;n++)this.addUVLine(this.parseUVIndex(t[n],s))}};return e.startObject("",!1),e},parse:function(t,r){void 0===r&&(r=!0),r&&console.time("OBJLoader");var s=this._createParserState();-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));for(var i=t.split("\n"),a="",n="",o="",h=[],l="function"==typeof"".trimLeft,d=0,u=i.length;d<u;d++)if(a=i[d],0!==(a=l?a.trimLeft():a.trim()).length&&"#"!==(n=a.charAt(0)))if("v"===n)" "===(o=a.charAt(1))&&null!==(h=this.regexp.vertex_pattern.exec(a))?s.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])):"n"===o&&null!==(h=this.regexp.normal_pattern.exec(a))?s.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])):"t"===o&&null!==(h=this.regexp.uv_pattern.exec(a))?s.uvs.push(parseFloat(h[1]),parseFloat(h[2])):this.onError("Unexpected vertex/normal/uv line: '"+a+"'");else if("f"===n)null!==(h=this.regexp.face_vertex_uv_normal.exec(a))?s.addFace(h[1],h[4],h[7],h[10],h[2],h[5],h[8],h[11],h[3],h[6],h[9],h[12]):null!==(h=this.regexp.face_vertex_uv.exec(a))?s.addFace(h[1],h[3],h[5],h[7],h[2],h[4],h[6],h[8]):null!==(h=this.regexp.face_vertex_normal.exec(a))?s.addFace(h[1],h[3],h[5],h[7],void 0,void 0,void 0,void 0,h[2],h[4],h[6],h[8]):null!==(h=this.regexp.face_vertex.exec(a))?s.addFace(h[1],h[2],h[3],h[4]):this.onError("Unexpected face line: '"+a+"'");else if("l"===n){var p=a.substring(1).trim().split(" "),c=[],m=[];if(-1===a.indexOf("/"))c=p;else for(var f=0,v=p.length;f<v;f++){var g=p[f].split("/");""!==g[0]&&c.push(g[0]),""!==g[1]&&m.push(g[1])}s.addLineGeometry(c,m)}else if(null!==(h=this.regexp.object_pattern.exec(a))){var x=(" "+h[0].substr(1).trim()).substr(1);s.startObject(x)}else if(this.regexp.material_use_pattern.test(a))s.object.startMaterial(a.substring(7).trim(),s.materialLibraries);else if(this.regexp.material_library_pattern.test(a))s.materialLibraries.push(a.substring(7).trim());else if(null!==(h=this.regexp.smoothing_pattern.exec(a))){var b=h[1].trim().toLowerCase();s.object.smooth="1"===b||"on"===b,(A=s.object.currentMaterial())&&(A.smooth=s.object.smooth)}else{if("\0"===a)continue;this.onError("Unexpected line: '"+a+"'")}s.finalize();var _=new e.Group;_.materialLibraries=[].concat(s.materialLibraries);for(d=0,u=s.objects.length;d<u;d++){var j=s.objects[d],y=j.geometry,L=j.materials,w="Line"===y.type;if(0!==y.vertices.length){var V=new e.BufferGeometry;V.addAttribute("position",new e.BufferAttribute(new Float32Array(y.vertices),3)),y.normals.length>0?V.addAttribute("normal",new e.BufferAttribute(new Float32Array(y.normals),3)):V.computeVertexNormals(),y.uvs.length>0&&V.addAttribute("uv",new e.BufferAttribute(new Float32Array(y.uvs),2));for(var E,I=[],F=0,M=L.length;F<M;F++){var U=L[F],A=void 0;if(null!==this.materials&&(A=this.materials.create(U.name),w&&A&&!(A instanceof e.LineBasicMaterial))){var B=new e.LineBasicMaterial;B.copy(A),A=B}A||((A=w?new e.LineBasicMaterial:new e.MeshPhongMaterial).name=U.name),A.shading=U.smooth?e.SmoothShading:e.FlatShading,I.push(A)}if(I.length>1){for(F=0,M=L.length;F<M;F++){U=L[F];V.addGroup(U.groupStart,U.groupCount,F)}var O=new e.MultiMaterial(I);E=w?new e.LineSegments(V,O):new e.Mesh(V,O)}else E=w?new e.LineSegments(V,I[0]):new e.Mesh(V,I[0]);E.name=j.name,_.add(E)}}return r&&console.timeEnd("OBJLoader"),_}}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdGhyZWUtb2JqLWxvYWRlci9kaXN0L2luZGV4LmpzIl0sIm5hbWVzIjpbImRlZmF1bHRPbkVycm9yIiwiZXJyIiwiRXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIiwiVEhSRUUiLCJPQkpMb2FkZXIiLCJtYW5hZ2VyIiwidGhpcyIsInVuZGVmaW5lZCIsIkRlZmF1bHRMb2FkaW5nTWFuYWdlciIsIm1hdGVyaWFscyIsInJlZ2V4cCIsInZlcnRleF9wYXR0ZXJuIiwibm9ybWFsX3BhdHRlcm4iLCJ1dl9wYXR0ZXJuIiwiZmFjZV92ZXJ0ZXgiLCJmYWNlX3ZlcnRleF91diIsImZhY2VfdmVydGV4X3V2X25vcm1hbCIsImZhY2VfdmVydGV4X25vcm1hbCIsIm9iamVjdF9wYXR0ZXJuIiwic21vb3RoaW5nX3BhdHRlcm4iLCJtYXRlcmlhbF9saWJyYXJ5X3BhdHRlcm4iLCJtYXRlcmlhbF91c2VfcGF0dGVybiIsInByb3RvdHlwZSIsImNvbnN0cnVjdG9yIiwibG9hZCIsInVybCIsIm9uTG9hZCIsIm9uUHJvZ3Jlc3MiLCJvbkVycm9yIiwic2NvcGUiLCJsb2FkZXIiLCJGaWxlTG9hZGVyIiwic2V0UGF0aCIsInBhdGgiLCJ0ZXh0IiwicGFyc2UiLCJ2YWx1ZSIsInNldE1hdGVyaWFscyIsIl9jcmVhdGVQYXJzZXJTdGF0ZSIsInN0YXRlIiwib2JqZWN0cyIsIm9iamVjdCIsInZlcnRpY2VzIiwibm9ybWFscyIsInV2cyIsIm1hdGVyaWFsTGlicmFyaWVzIiwic3RhcnRPYmplY3QiLCJuYW1lIiwiZnJvbURlY2xhcmF0aW9uIiwicHJldmlvdXNNYXRlcmlhbCIsImN1cnJlbnRNYXRlcmlhbCIsIl9maW5hbGl6ZSIsImdlb21ldHJ5Iiwic21vb3RoIiwic3RhcnRNYXRlcmlhbCIsImxpYnJhcmllcyIsInByZXZpb3VzIiwiaW5oZXJpdGVkIiwiZ3JvdXBDb3VudCIsInNwbGljZSIsImluZGV4IiwibWF0ZXJpYWwiLCJsZW5ndGgiLCJtdGxsaWIiLCJBcnJheSIsImlzQXJyYXkiLCJncm91cFN0YXJ0IiwiZ3JvdXBFbmQiLCJjbG9uZSIsImNsb25lZCIsImJpbmQiLCJwdXNoIiwiZW5kIiwibGFzdE11bHRpTWF0ZXJpYWwiLCJtaSIsImRlY2xhcmVkIiwiZmluYWxpemUiLCJwYXJzZVZlcnRleEluZGV4IiwibGVuIiwicGFyc2VJbnQiLCJwYXJzZU5vcm1hbEluZGV4IiwicGFyc2VVVkluZGV4IiwiYWRkVmVydGV4IiwiYSIsImIiLCJjIiwic3JjIiwiZHN0IiwiYWRkVmVydGV4TGluZSIsImFkZE5vcm1hbCIsImFkZFVWIiwiYWRkVVZMaW5lIiwiYWRkRmFjZSIsImQiLCJ1YSIsInViIiwidWMiLCJ1ZCIsIm5hIiwibmIiLCJuYyIsIm5kIiwiaWQiLCJ2TGVuIiwiaWEiLCJpYiIsImljIiwidXZMZW4iLCJuTGVuIiwiYWRkTGluZUdlb21ldHJ5IiwidHlwZSIsInZpIiwibCIsInV2aSIsImRlYnVnIiwiY29uc29sZSIsInRpbWUiLCJpbmRleE9mIiwicmVwbGFjZSIsImxpbmVzIiwic3BsaXQiLCJsaW5lIiwibGluZUZpcnN0Q2hhciIsImxpbmVTZWNvbmRDaGFyIiwicmVzdWx0IiwidHJpbUxlZnQiLCJpIiwidHJpbSIsImNoYXJBdCIsImV4ZWMiLCJwYXJzZUZsb2F0IiwibGluZVBhcnRzIiwic3Vic3RyaW5nIiwibGluZVZlcnRpY2VzIiwibGluZVVWcyIsImxpIiwibGxlbiIsInBhcnRzIiwic3Vic3RyIiwidGVzdCIsInRvTG93ZXJDYXNlIiwiY29udGFpbmVyIiwiR3JvdXAiLCJjb25jYXQiLCJpc0xpbmUiLCJidWZmZXJnZW9tZXRyeSIsIkJ1ZmZlckdlb21ldHJ5IiwiYWRkQXR0cmlidXRlIiwiQnVmZmVyQXR0cmlidXRlIiwiRmxvYXQzMkFycmF5IiwiY29tcHV0ZVZlcnRleE5vcm1hbHMiLCJtZXNoIiwiY3JlYXRlZE1hdGVyaWFscyIsIm1pTGVuIiwic291cmNlTWF0ZXJpYWwiLCJjcmVhdGUiLCJMaW5lQmFzaWNNYXRlcmlhbCIsIm1hdGVyaWFsTGluZSIsImNvcHkiLCJNZXNoUGhvbmdNYXRlcmlhbCIsInNoYWRpbmciLCJTbW9vdGhTaGFkaW5nIiwiRmxhdFNoYWRpbmciLCJhZGRHcm91cCIsIm11bHRpTWF0ZXJpYWwiLCJNdWx0aU1hdGVyaWFsIiwiTGluZVNlZ21lbnRzIiwiTWVzaCIsImFkZCIsInRpbWVFbmQiXSwibWFwcGluZ3MiOiIwRkFFQSxTQUFTQSxFQUFlQyxHQUN0QixNQUFNLElBQUlDLE1BQU1ELEdBR2xCRSxFQUFPQyxRQUFVLFNBQVVDLEdBTXpCQSxFQUFNQyxVQUFZLFNBQVVDLEdBRTFCQyxLQUFLRCxhQUFzQkUsSUFBWkYsRUFBd0JBLEVBQVVGLEVBQU1LLHNCQUV2REYsS0FBS0csVUFBWSxLQUVqQkgsS0FBS0ksT0FBUyxDQUVaQyxlQUFnQiwwRUFFaEJDLGVBQWdCLDJFQUVoQkMsV0FBWSxvREFFWkMsWUFBYSxrREFFYkMsZUFBZ0Isc0ZBRWhCQyxzQkFBdUIsMEhBRXZCQyxtQkFBb0IsOEZBRXBCQyxlQUFnQixnQkFFaEJDLGtCQUFtQixvQkFFbkJDLHlCQUEwQixXQUUxQkMscUJBQXNCLGFBSTFCbEIsRUFBTUMsVUFBVWtCLFVBQVksQ0FFMUJDLFlBQWFwQixFQUFNQyxVQUVuQm9CLEtBQU0sU0FBY0MsRUFBS0MsRUFBUUMsRUFBWUMsR0FFM0MsSUFBSUMsRUFBUXZCLEtBQ1pBLEtBQUtzQixRQUFVQSxHQUFXOUIsRUFFMUIsSUFBSWdDLEVBQVMsSUFBSTNCLEVBQU00QixXQUFXRixFQUFNeEIsU0FDeEN5QixFQUFPRSxRQUFRMUIsS0FBSzJCLE1BQ3BCSCxFQUFPTixLQUFLQyxHQUFLLFNBQVVTLEdBRXpCUixFQUFPRyxFQUFNTSxNQUFNRCxNQUNsQlAsRUFBWUMsSUFHakJJLFFBQVMsU0FBaUJJLEdBRXhCOUIsS0FBSzJCLEtBQU9HLEdBR2RDLGFBQWMsU0FBc0I1QixHQUVsQ0gsS0FBS0csVUFBWUEsR0FHbkI2QixtQkFBb0IsV0FFbEIsSUFBSUMsRUFBUSxDQUNWQyxR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LEVBQUt4RyxLQUFPTixFQUFPTSxLQUVuQjhGLEVBQVUyQixJQUFJakIsSUFPaEIsT0FKSXJDLEdBQ0ZDLFFBQVFzRCxRQUFRLGFBR1g1QiIsImZpbGUiOiJhd2FyZF9kaXN0L2pzLzE1LmIzOWJhZjk3Mjc4OGM1MWZhZTJlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBkZWZhdWx0T25FcnJvcihlcnIpIHtcbiAgdGhyb3cgbmV3IEVycm9yKGVycik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKFRIUkVFKSB7XG5cbiAgLyoqXG4gICAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXG4gICAqL1xuXG4gIFRIUkVFLk9CSkxvYWRlciA9IGZ1bmN0aW9uIChtYW5hZ2VyKSB7XG5cbiAgICB0aGlzLm1hbmFnZXIgPSBtYW5hZ2VyICE9PSB1bmRlZmluZWQgPyBtYW5hZ2VyIDogVEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyO1xuXG4gICAgdGhpcy5tYXRlcmlhbHMgPSBudWxsO1xuXG4gICAgdGhpcy5yZWdleHAgPSB7XG4gICAgICAvLyB2IGZsb2F0IGZsb2F0IGZsb2F0XG4gICAgICB2ZXJ0ZXhfcGF0dGVybjogL152XFxzKyhbXFxkfFxcLnxcXCt8XFwtfGV8RV0rKVxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKylcXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspLyxcbiAgICAgIC8vIHZuIGZsb2F0IGZsb2F0IGZsb2F0XG4gICAgICBub3JtYWxfcGF0dGVybjogL152blxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKylcXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspXFxzKyhbXFxkfFxcLnxcXCt8XFwtfGV8RV0rKS8sXG4gICAgICAvLyB2dCBmbG9hdCBmbG9hdFxuICAgICAgdXZfcGF0dGVybjogL152dFxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKylcXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspLyxcbiAgICAgIC8vIGYgdmVydGV4IHZlcnRleCB2ZXJ0ZXhcbiAgICAgIGZhY2VfdmVydGV4OiAvXmZcXHMrKC0/XFxkKylcXHMrKC0/XFxkKylcXHMrKC0/XFxkKykoPzpcXHMrKC0/XFxkKykpPy8sXG4gICAgICAvLyBmIHZlcnRleC91diB2ZXJ0ZXgvdXYgdmVydGV4L3V2XG4gICAgICBmYWNlX3ZlcnRleF91djogL15mXFxzKygtP1xcZCspXFwvKC0/XFxkKylcXHMrKC0/XFxkKylcXC8oLT9cXGQrKVxccysoLT9cXGQrKVxcLygtP1xcZCspKD86XFxzKygtP1xcZCspXFwvKC0/XFxkKykpPy8sXG4gICAgICAvLyBmIHZlcnRleC91di9ub3JtYWwgdmVydGV4L3V2L25vcm1hbCB2ZXJ0ZXgvdXYvbm9ybWFsXG4gICAgICBmYWNlX3ZlcnRleF91dl9ub3JtYWw6IC9eZlxccysoLT9cXGQrKVxcLygtP1xcZCspXFwvKC0/XFxkKylcXHMrKC0/XFxkKylcXC8oLT9cXGQrKVxcLygtP1xcZCspXFxzKygtP1xcZCspXFwvKC0/XFxkKylcXC8oLT9cXGQrKSg/OlxccysoLT9cXGQrKVxcLygtP1xcZCspXFwvKC0/XFxkKykpPy8sXG4gICAgICAvLyBmIHZlcnRleC8vbm9ybWFsIHZlcnRleC8vbm9ybWFsIHZlcnRleC8vbm9ybWFsXG4gICAgICBmYWNlX3ZlcnRleF9ub3JtYWw6IC9eZlxccysoLT9cXGQrKVxcL1xcLygtP1xcZCspXFxzKygtP1xcZCspXFwvXFwvKC0/XFxkKylcXHMrKC0/XFxkKylcXC9cXC8oLT9cXGQrKSg/OlxccysoLT9cXGQrKVxcL1xcLygtP1xcZCspKT8vLFxuICAgICAgLy8gbyBvYmplY3RfbmFtZSB8IGcgZ3JvdXBfbmFtZVxuICAgICAgb2JqZWN0X3BhdHRlcm46IC9eW29nXVxccyooLispPy8sXG4gICAgICAvLyBzIGJvb2xlYW5cbiAgICAgIHNtb290aGluZ19wYXR0ZXJuOiAvXnNcXHMrKFxcZCt8b258b2ZmKS8sXG4gICAgICAvLyBtdGxsaWIgZmlsZV9yZWZlcmVuY2VcbiAgICAgIG1hdGVyaWFsX2xpYnJhcnlfcGF0dGVybjogL15tdGxsaWIgLyxcbiAgICAgIC8vIHVzZW10bCBtYXRlcmlhbF9uYW1lXG4gICAgICBtYXRlcmlhbF91c2VfcGF0dGVybjogL151c2VtdGwgL1xuICAgIH07XG4gIH07XG5cbiAgVEhSRUUuT0JKTG9hZGVyLnByb3RvdHlwZSA9IHtcblxuICAgIGNvbnN0cnVjdG9yOiBUSFJFRS5PQkpMb2FkZXIsXG5cbiAgICBsb2FkOiBmdW5jdGlvbiBsb2FkKHVybCwgb25Mb2FkLCBvblByb2dyZXNzLCBvbkVycm9yKSB7XG5cbiAgICAgIHZhciBzY29wZSA9IHRoaXM7XG4gICAgICB0aGlzLm9uRXJyb3IgPSBvbkVycm9yIHx8IGRlZmF1bHRPbkVycm9yO1xuXG4gICAgICB2YXIgbG9hZGVyID0gbmV3IFRIUkVFLkZpbGVMb2FkZXIoc2NvcGUubWFuYWdlcik7XG4gICAgICBsb2FkZXIuc2V0UGF0aCh0aGlzLnBhdGgpO1xuICAgICAgbG9hZGVyLmxvYWQodXJsLCBmdW5jdGlvbiAodGV4dCkge1xuXG4gICAgICAgIG9uTG9hZChzY29wZS5wYXJzZSh0ZXh0KSk7XG4gICAgICB9LCBvblByb2dyZXNzLCBvbkVycm9yKTtcbiAgICB9LFxuXG4gICAgc2V0UGF0aDogZnVuY3Rpb24gc2V0UGF0aCh2YWx1ZSkge1xuXG4gICAgICB0aGlzLnBhdGggPSB2YWx1ZTtcbiAgICB9LFxuXG4gICAgc2V0TWF0ZXJpYWxzOiBmdW5jdGlvbiBzZXRNYXRlcmlhbHMobWF0ZXJpYWxzKSB7XG5cbiAgICAgIHRoaXMubWF0ZXJpYWxzID0gbWF0ZXJpYWxzO1xuICAgIH0sXG5cbiAgICBfY3JlYXRlUGFyc2VyU3RhdGU6IGZ1bmN0aW9uIF9jcmVhdGVQYXJzZXJTdGF0ZSgpIHtcblxuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBvYmplY3RzOiBbXSxcbiAgICAgICAgb2JqZWN0OiB7fSxcblxuICAgICAgICB2ZXJ0aWNlczogW10sXG4gICAgICAgIG5vcm1hbHM6IFtdLFxuICAgICAgICB1dnM6IFtdLFxuXG4gICAgICAgIG1hdGVyaWFsTGlicmFyaWVzOiBbXSxcblxuICAgICAgICBzdGFydE9iamVjdDogZnVuY3Rpb24gc3RhcnRPYmplY3QobmFtZSwgZnJvbURlY2xhcmF0aW9uKSB7XG5cbiAgICAgICAgICAvLyBJZiB0aGUgY3VycmVudCBvYmplY3QgKGluaXRpYWwgZnJvbSByZXNldCkgaXMgbm90IGZyb20gYSBnL28gZGVjbGFyYXRpb24gaW4gdGhlIHBhcnNlZFxuICAgICAgICAgIC8vIGZpbGUuIFdlIG5lZWQgdG8gdXNlIGl0IGZvciB0aGUgZmlyc3QgcGFyc2VkIGcvbyB0byBrZWVwIHRoaW5ncyBpbiBzeW5jLlxuICAgICAgICAgIGlmICh0aGlzLm9iamVjdCAmJiB0aGlzLm9iamVjdC5mcm9tRGVjbGFyYXRpb24gPT09IGZhbHNlKSB7XG5cbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lm5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgdGhpcy5vYmplY3QuZnJvbURlY2xhcmF0aW9uID0gZnJvbURlY2xhcmF0aW9uICE9PSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgcHJldmlvdXNNYXRlcmlhbCA9IHRoaXMub2JqZWN0ICYmIHR5cGVvZiB0aGlzLm9iamVjdC5jdXJyZW50TWF0ZXJpYWwgPT09ICdmdW5jdGlvbicgPyB0aGlzLm9iamVjdC5jdXJyZW50TWF0ZXJpYWwoKSA6IHVuZGVmaW5lZDtcblxuICAgICAgICAgIGlmICh0aGlzLm9iamVjdCAmJiB0eXBlb2YgdGhpcy5vYmplY3QuX2ZpbmFsaXplID09PSAnZnVuY3Rpb24nKSB7XG5cbiAgICAgICAgICAgIHRoaXMub2JqZWN0Ll9maW5hbGl6ZSh0cnVlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLm9iamVjdCA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgfHwgJycsXG4gICAgICAgICAgICBmcm9tRGVjbGFyYXRpb246IGZyb21EZWNsYXJhdGlvbiAhPT0gZmFsc2UsXG5cbiAgICAgICAgICAgIGdlb21ldHJ5OiB7XG4gICAgICAgICAgICAgIHZlcnRpY2VzOiBbXSxcbiAgICAgICAgICAgICAgbm9ybWFsczogW10sXG4gICAgICAgICAgICAgIHV2czogW11cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYXRlcmlhbHM6IFtdLFxuICAgICAgICAgICAgc21vb3RoOiB0cnVlLFxuXG4gICAgICAgICAgICBzdGFydE1hdGVyaWFsOiBmdW5jdGlvbiBzdGFydE1hdGVyaWFsKG5hbWUsIGxpYnJhcmllcykge1xuXG4gICAgICAgICAgICAgIHZhciBwcmV2aW91cyA9IHRoaXMuX2ZpbmFsaXplKGZhbHNlKTtcblxuICAgICAgICAgICAgICAvLyBOZXcgdXNlbXRsIGRlY2xhcmF0aW9uIG92ZXJ3cml0ZXMgYW4gaW5oZXJpdGVkIG1hdGVyaWFsLCBleGNlcHQgaWYgZmFjZXMgd2VyZSBkZWNsYXJlZFxuICAgICAgICAgICAgICAvLyBhZnRlciB0aGUgbWF0ZXJpYWwsIHRoZW4gaXQgbXVzdCBiZSBwcmVzZXJ2ZWQgZm9yIHByb3BlciBNdWx0aU1hdGVyaWFsIGNvbnRpbnVhdGlvbi5cbiAgICAgICAgICAgICAgaWYgKHByZXZpb3VzICYmIChwcmV2aW91cy5pbmhlcml0ZWQgfHwgcHJldmlvdXMuZ3JvdXBDb3VudCA8PSAwKSkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbHMuc3BsaWNlKHByZXZpb3VzLmluZGV4LCAxKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9IHtcbiAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5tYXRlcmlhbHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUgfHwgJycsXG4gICAgICAgICAgICAgICAgbXRsbGliOiBBcnJheS5pc0FycmF5KGxpYnJhcmllcykgJiYgbGlicmFyaWVzLmxlbmd0aCA+IDAgPyBsaWJyYXJpZXNbbGlicmFyaWVzLmxlbmd0aCAtIDFdIDogJycsXG4gICAgICAgICAgICAgICAgc21vb3RoOiBwcmV2aW91cyAhPT0gdW5kZWZpbmVkID8gcHJldmlvdXMuc21vb3RoIDogdGhpcy5zbW9vdGgsXG4gICAgICAgICAgICAgICAgZ3JvdXBTdGFydDogcHJldmlvdXMgIT09IHVuZGVmaW5lZCA/IHByZXZpb3VzLmdyb3VwRW5kIDogMCxcbiAgICAgICAgICAgICAgICBncm91cEVuZDogLTEsXG4gICAgICAgICAgICAgICAgZ3JvdXBDb3VudDogLTEsXG4gICAgICAgICAgICAgICAgaW5oZXJpdGVkOiBmYWxzZSxcblxuICAgICAgICAgICAgICAgIGNsb25lOiBmdW5jdGlvbiBjbG9uZShpbmRleCkge1xuICAgICAgICAgICAgICAgICAgdmFyIGNsb25lZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHR5cGVvZiBpbmRleCA9PT0gJ251bWJlcicgPyBpbmRleCA6IHRoaXMuaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgbXRsbGliOiB0aGlzLm10bGxpYixcbiAgICAgICAgICAgICAgICAgICAgc21vb3RoOiB0aGlzLnNtb290aCxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBTdGFydDogMCxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBFbmQ6IC0xLFxuICAgICAgICAgICAgICAgICAgICBncm91cENvdW50OiAtMSxcbiAgICAgICAgICAgICAgICAgICAgaW5oZXJpdGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIGNsb25lZC5jbG9uZSA9IHRoaXMuY2xvbmUuYmluZChjbG9uZWQpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsb25lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbHMucHVzaChtYXRlcmlhbCk7XG5cbiAgICAgICAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgY3VycmVudE1hdGVyaWFsOiBmdW5jdGlvbiBjdXJyZW50TWF0ZXJpYWwoKSB7XG5cbiAgICAgICAgICAgICAgaWYgKHRoaXMubWF0ZXJpYWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tYXRlcmlhbHNbdGhpcy5tYXRlcmlhbHMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgX2ZpbmFsaXplOiBmdW5jdGlvbiBfZmluYWxpemUoZW5kKSB7XG5cbiAgICAgICAgICAgICAgdmFyIGxhc3RNdWx0aU1hdGVyaWFsID0gdGhpcy5jdXJyZW50TWF0ZXJpYWwoKTtcbiAgICAgICAgICAgICAgaWYgKGxhc3RNdWx0aU1hdGVyaWFsICYmIGxhc3RNdWx0aU1hdGVyaWFsLmdyb3VwRW5kID09PSAtMSkge1xuXG4gICAgICAgICAgICAgICAgbGFzdE11bHRpTWF0ZXJpYWwuZ3JvdXBFbmQgPSB0aGlzLmdlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aCAvIDM7XG4gICAgICAgICAgICAgICAgbGFzdE11bHRpTWF0ZXJpYWwuZ3JvdXBDb3VudCA9IGxhc3RNdWx0aU1hdGVyaWFsLmdyb3VwRW5kIC0gbGFzdE11bHRpTWF0ZXJpYWwuZ3JvdXBTdGFydDtcbiAgICAgICAgICAgICAgICBsYXN0TXVsdGlNYXRlcmlhbC5pbmhlcml0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIElnbm9yZSBvYmplY3RzIHRhaWwgbWF0ZXJpYWxzIGlmIG5vIGZhY2UgZGVjbGFyYXRpb25zIGZvbGxvd2VkIHRoZW0gYmVmb3JlIGEgbmV3IG8vZyBzdGFydGVkLlxuICAgICAgICAgICAgICBpZiAoZW5kICYmIHRoaXMubWF0ZXJpYWxzLmxlbmd0aCA+IDEpIHtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIG1pID0gdGhpcy5tYXRlcmlhbHMubGVuZ3RoIC0gMTsgbWkgPj0gMDsgbWktLSkge1xuICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWF0ZXJpYWxzW21pXS5ncm91cENvdW50IDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbHMuc3BsaWNlKG1pLCAxKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBHdWFyYW50ZWUgYXQgbGVhc3Qgb25lIGVtcHR5IG1hdGVyaWFsLCB0aGlzIG1ha2VzIHRoZSBjcmVhdGlvbiBsYXRlciBtb3JlIHN0cmFpZ2h0IGZvcndhcmQuXG4gICAgICAgICAgICAgIGlmIChlbmQgJiYgdGhpcy5tYXRlcmlhbHMubGVuZ3RoID09PSAwKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6ICcnLFxuICAgICAgICAgICAgICAgICAgc21vb3RoOiB0aGlzLnNtb290aFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmV0dXJuIGxhc3RNdWx0aU1hdGVyaWFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICAvLyBJbmhlcml0IHByZXZpb3VzIG9iamVjdHMgbWF0ZXJpYWwuXG4gICAgICAgICAgLy8gU3BlYyB0ZWxscyB1cyB0aGF0IGEgZGVjbGFyZWQgbWF0ZXJpYWwgbXVzdCBiZSBzZXQgdG8gYWxsIG9iamVjdHMgdW50aWwgYSBuZXcgbWF0ZXJpYWwgaXMgZGVjbGFyZWQuXG4gICAgICAgICAgLy8gSWYgYSB1c2VtdGwgZGVjbGFyYXRpb24gaXMgZW5jb3VudGVyZWQgd2hpbGUgdGhpcyBuZXcgb2JqZWN0IGlzIGJlaW5nIHBhcnNlZCwgaXQgd2lsbFxuICAgICAgICAgIC8vIG92ZXJ3cml0ZSB0aGUgaW5oZXJpdGVkIG1hdGVyaWFsLiBFeGNlcHRpb24gYmVpbmcgdGhhdCB0aGVyZSB3YXMgYWxyZWFkeSBmYWNlIGRlY2xhcmF0aW9uc1xuICAgICAgICAgIC8vIHRvIHRoZSBpbmhlcml0ZWQgbWF0ZXJpYWwsIHRoZW4gaXQgd2lsbCBiZSBwcmVzZXJ2ZWQgZm9yIHByb3BlciBNdWx0aU1hdGVyaWFsIGNvbnRpbnVhdGlvbi5cblxuICAgICAgICAgIGlmIChwcmV2aW91c01hdGVyaWFsICYmIHByZXZpb3VzTWF0ZXJpYWwubmFtZSAmJiB0eXBlb2YgcHJldmlvdXNNYXRlcmlhbC5jbG9uZSA9PT0gXCJmdW5jdGlvblwiKSB7XG5cbiAgICAgICAgICAgIHZhciBkZWNsYXJlZCA9IHByZXZpb3VzTWF0ZXJpYWwuY2xvbmUoMCk7XG4gICAgICAgICAgICBkZWNsYXJlZC5pbmhlcml0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5vYmplY3QubWF0ZXJpYWxzLnB1c2goZGVjbGFyZWQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMub2JqZWN0cy5wdXNoKHRoaXMub2JqZWN0KTtcbiAgICAgICAgfSxcblxuICAgICAgICBmaW5hbGl6ZTogZnVuY3Rpb24gZmluYWxpemUoKSB7XG5cbiAgICAgICAgICBpZiAodGhpcy5vYmplY3QgJiYgdHlwZW9mIHRoaXMub2JqZWN0Ll9maW5hbGl6ZSA9PT0gJ2Z1bmN0aW9uJykge1xuXG4gICAgICAgICAgICB0aGlzLm9iamVjdC5fZmluYWxpemUodHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHBhcnNlVmVydGV4SW5kZXg6IGZ1bmN0aW9uIHBhcnNlVmVydGV4SW5kZXgodmFsdWUsIGxlbikge1xuXG4gICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICAgICAgICByZXR1cm4gKGluZGV4ID49IDAgPyBpbmRleCAtIDEgOiBpbmRleCArIGxlbiAvIDMpICogMztcbiAgICAgICAgfSxcblxuICAgICAgICBwYXJzZU5vcm1hbEluZGV4OiBmdW5jdGlvbiBwYXJzZU5vcm1hbEluZGV4KHZhbHVlLCBsZW4pIHtcblxuICAgICAgICAgIHZhciBpbmRleCA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgICAgcmV0dXJuIChpbmRleCA+PSAwID8gaW5kZXggLSAxIDogaW5kZXggKyBsZW4gLyAzKSAqIDM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcGFyc2VVVkluZGV4OiBmdW5jdGlvbiBwYXJzZVVWSW5kZXgodmFsdWUsIGxlbikge1xuXG4gICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICAgICAgICByZXR1cm4gKGluZGV4ID49IDAgPyBpbmRleCAtIDEgOiBpbmRleCArIGxlbiAvIDIpICogMjtcbiAgICAgICAgfSxcblxuICAgICAgICBhZGRWZXJ0ZXg6IGZ1bmN0aW9uIGFkZFZlcnRleChhLCBiLCBjKSB7XG5cbiAgICAgICAgICB2YXIgc3JjID0gdGhpcy52ZXJ0aWNlcztcbiAgICAgICAgICB2YXIgZHN0ID0gdGhpcy5vYmplY3QuZ2VvbWV0cnkudmVydGljZXM7XG5cbiAgICAgICAgICBkc3QucHVzaChzcmNbYSArIDBdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYSArIDFdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYSArIDJdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYiArIDBdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYiArIDFdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYiArIDJdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYyArIDBdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYyArIDFdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYyArIDJdKTtcbiAgICAgICAgfSxcblxuICAgICAgICBhZGRWZXJ0ZXhMaW5lOiBmdW5jdGlvbiBhZGRWZXJ0ZXhMaW5lKGEpIHtcblxuICAgICAgICAgIHZhciBzcmMgPSB0aGlzLnZlcnRpY2VzO1xuICAgICAgICAgIHZhciBkc3QgPSB0aGlzLm9iamVjdC5nZW9tZXRyeS52ZXJ0aWNlcztcblxuICAgICAgICAgIGRzdC5wdXNoKHNyY1thICsgMF0pO1xuICAgICAgICAgIGRzdC5wdXNoKHNyY1thICsgMV0pO1xuICAgICAgICAgIGRzdC5wdXNoKHNyY1thICsgMl0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGFkZE5vcm1hbDogZnVuY3Rpb24gYWRkTm9ybWFsKGEsIGIsIGMpIHtcblxuICAgICAgICAgIHZhciBzcmMgPSB0aGlzLm5vcm1hbHM7XG4gICAgICAgICAgdmFyIGRzdCA9IHRoaXMub2JqZWN0Lmdlb21ldHJ5Lm5vcm1hbHM7XG5cbiAgICAgICAgICBkc3QucHVzaChzcmNbYSArIDBdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYSArIDFdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYSArIDJdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYiArIDBdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYiArIDFdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYiArIDJdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYyArIDBdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYyArIDFdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYyArIDJdKTtcbiAgICAgICAgfSxcblxuICAgICAgICBhZGRVVjogZnVuY3Rpb24gYWRkVVYoYSwgYiwgYykge1xuXG4gICAgICAgICAgdmFyIHNyYyA9IHRoaXMudXZzO1xuICAgICAgICAgIHZhciBkc3QgPSB0aGlzLm9iamVjdC5nZW9tZXRyeS51dnM7XG5cbiAgICAgICAgICBkc3QucHVzaChzcmNbYSArIDBdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYSArIDFdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYiArIDBdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYiArIDFdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYyArIDBdKTtcbiAgICAgICAgICBkc3QucHVzaChzcmNbYyArIDFdKTtcbiAgICAgICAgfSxcblxuICAgICAgICBhZGRVVkxpbmU6IGZ1bmN0aW9uIGFkZFVWTGluZShhKSB7XG5cbiAgICAgICAgICB2YXIgc3JjID0gdGhpcy51dnM7XG4gICAgICAgICAgdmFyIGRzdCA9IHRoaXMub2JqZWN0Lmdlb21ldHJ5LnV2cztcblxuICAgICAgICAgIGRzdC5wdXNoKHNyY1thICsgMF0pO1xuICAgICAgICAgIGRzdC5wdXNoKHNyY1thICsgMV0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGFkZEZhY2U6IGZ1bmN0aW9uIGFkZEZhY2UoYSwgYiwgYywgZCwgdWEsIHViLCB1YywgdWQsIG5hLCBuYiwgbmMsIG5kKSB7XG5cbiAgICAgICAgICB2YXIgdkxlbiA9IHRoaXMudmVydGljZXMubGVuZ3RoO1xuXG4gICAgICAgICAgdmFyIGlhID0gdGhpcy5wYXJzZVZlcnRleEluZGV4KGEsIHZMZW4pO1xuICAgICAgICAgIHZhciBpYiA9IHRoaXMucGFyc2VWZXJ0ZXhJbmRleChiLCB2TGVuKTtcbiAgICAgICAgICB2YXIgaWMgPSB0aGlzLnBhcnNlVmVydGV4SW5kZXgoYywgdkxlbik7XG4gICAgICAgICAgdmFyIGlkO1xuXG4gICAgICAgICAgaWYgKGQgPT09IHVuZGVmaW5lZCkge1xuXG4gICAgICAgICAgICB0aGlzLmFkZFZlcnRleChpYSwgaWIsIGljKTtcbiAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICBpZCA9IHRoaXMucGFyc2VWZXJ0ZXhJbmRleChkLCB2TGVuKTtcblxuICAgICAgICAgICAgdGhpcy5hZGRWZXJ0ZXgoaWEsIGliLCBpZCk7XG4gICAgICAgICAgICB0aGlzLmFkZFZlcnRleChpYiwgaWMsIGlkKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodWEgIT09IHVuZGVmaW5lZCkge1xuXG4gICAgICAgICAgICB2YXIgdXZMZW4gPSB0aGlzLnV2cy5sZW5ndGg7XG5cbiAgICAgICAgICAgIGlhID0gdGhpcy5wYXJzZVVWSW5kZXgodWEsIHV2TGVuKTtcbiAgICAgICAgICAgIGliID0gdGhpcy5wYXJzZVVWSW5kZXgodWIsIHV2TGVuKTtcbiAgICAgICAgICAgIGljID0gdGhpcy5wYXJzZVVWSW5kZXgodWMsIHV2TGVuKTtcblxuICAgICAgICAgICAgaWYgKGQgPT09IHVuZGVmaW5lZCkge1xuXG4gICAgICAgICAgICAgIHRoaXMuYWRkVVYoaWEsIGliLCBpYyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgIGlkID0gdGhpcy5wYXJzZVVWSW5kZXgodWQsIHV2TGVuKTtcblxuICAgICAgICAgICAgICB0aGlzLmFkZFVWKGlhLCBpYiwgaWQpO1xuICAgICAgICAgICAgICB0aGlzLmFkZFVWKGliLCBpYywgaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChuYSAhPT0gdW5kZWZpbmVkKSB7XG5cbiAgICAgICAgICAgIC8vIE5vcm1hbHMgYXJlIG1hbnkgdGltZXMgdGhlIHNhbWUuIElmIHNvLCBza2lwIGZ1bmN0aW9uIGNhbGwgYW5kIHBhcnNlSW50LlxuICAgICAgICAgICAgdmFyIG5MZW4gPSB0aGlzLm5vcm1hbHMubGVuZ3RoO1xuICAgICAgICAgICAgaWEgPSB0aGlzLnBhcnNlTm9ybWFsSW5kZXgobmEsIG5MZW4pO1xuXG4gICAgICAgICAgICBpYiA9IG5hID09PSBuYiA/IGlhIDogdGhpcy5wYXJzZU5vcm1hbEluZGV4KG5iLCBuTGVuKTtcbiAgICAgICAgICAgIGljID0gbmEgPT09IG5jID8gaWEgOiB0aGlzLnBhcnNlTm9ybWFsSW5kZXgobmMsIG5MZW4pO1xuXG4gICAgICAgICAgICBpZiAoZCA9PT0gdW5kZWZpbmVkKSB7XG5cbiAgICAgICAgICAgICAgdGhpcy5hZGROb3JtYWwoaWEsIGliLCBpYyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgIGlkID0gdGhpcy5wYXJzZU5vcm1hbEluZGV4KG5kLCBuTGVuKTtcblxuICAgICAgICAgICAgICB0aGlzLmFkZE5vcm1hbChpYSwgaWIsIGlkKTtcbiAgICAgICAgICAgICAgdGhpcy5hZGROb3JtYWwoaWIsIGljLCBpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGFkZExpbmVHZW9tZXRyeTogZnVuY3Rpb24gYWRkTGluZUdlb21ldHJ5KHZlcnRpY2VzLCB1dnMpIHtcblxuICAgICAgICAgIHRoaXMub2JqZWN0Lmdlb21ldHJ5LnR5cGUgPSAnTGluZSc7XG5cbiAgICAgICAgICB2YXIgdkxlbiA9IHRoaXMudmVydGljZXMubGVuZ3RoO1xuICAgICAgICAgIHZhciB1dkxlbiA9IHRoaXMudXZzLmxlbmd0aDtcblxuICAgICAgICAgIGZvciAodmFyIHZpID0gMCwgbCA9IHZlcnRpY2VzLmxlbmd0aDsgdmkgPCBsOyB2aSsrKSB7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkVmVydGV4TGluZSh0aGlzLnBhcnNlVmVydGV4SW5kZXgodmVydGljZXNbdmldLCB2TGVuKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm9yICh2YXIgdXZpID0gMCwgbCA9IHV2cy5sZW5ndGg7IHV2aSA8IGw7IHV2aSsrKSB7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkVVZMaW5lKHRoaXMucGFyc2VVVkluZGV4KHV2c1t1dmldLCB1dkxlbikpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICB9O1xuXG4gICAgICBzdGF0ZS5zdGFydE9iamVjdCgnJywgZmFsc2UpO1xuXG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfSxcblxuICAgIHBhcnNlOiBmdW5jdGlvbiBwYXJzZSh0ZXh0LCBkZWJ1Zykge1xuICAgICAgaWYgKHR5cGVvZiBkZWJ1ZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGVidWcgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGVidWcpIHtcbiAgICAgICAgY29uc29sZS50aW1lKCdPQkpMb2FkZXInKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN0YXRlID0gdGhpcy5fY3JlYXRlUGFyc2VyU3RhdGUoKTtcblxuICAgICAgaWYgKHRleHQuaW5kZXhPZignXFxyXFxuJykgIT09IC0xKSB7XG5cbiAgICAgICAgLy8gVGhpcyBpcyBmYXN0ZXIgdGhhbiBTdHJpbmcuc3BsaXQgd2l0aCByZWdleCB0aGF0IHNwbGl0cyBvbiBib3RoXG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1xcclxcbi9nLCAnXFxuJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0ZXh0LmluZGV4T2YoJ1xcXFxcXG4nKSAhPT0gLTEpIHtcblxuICAgICAgICAvLyBqb2luIGxpbmVzIHNlcGFyYXRlZCBieSBhIGxpbmUgY29udGludWF0aW9uIGNoYXJhY3RlciAoXFwpXG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1xcXFxcXG4vZywgJycpO1xuICAgICAgfVxuXG4gICAgICB2YXIgbGluZXMgPSB0ZXh0LnNwbGl0KCdcXG4nKTtcbiAgICAgIHZhciBsaW5lID0gJycsXG4gICAgICAgICAgbGluZUZpcnN0Q2hhciA9ICcnLFxuICAgICAgICAgIGxpbmVTZWNvbmRDaGFyID0gJyc7XG4gICAgICB2YXIgbGluZUxlbmd0aCA9IDA7XG4gICAgICB2YXIgcmVzdWx0ID0gW107XG5cbiAgICAgIC8vIEZhc3RlciB0byBqdXN0IHRyaW0gbGVmdCBzaWRlIG9mIHRoZSBsaW5lLiBVc2UgaWYgYXZhaWxhYmxlLlxuICAgICAgdmFyIHRyaW1MZWZ0ID0gdHlwZW9mICcnLnRyaW1MZWZ0ID09PSAnZnVuY3Rpb24nO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGxpbmVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXG4gICAgICAgIGxpbmUgPSBsaW5lc1tpXTtcblxuICAgICAgICBsaW5lID0gdHJpbUxlZnQgPyBsaW5lLnRyaW1MZWZ0KCkgOiBsaW5lLnRyaW0oKTtcblxuICAgICAgICBsaW5lTGVuZ3RoID0gbGluZS5sZW5ndGg7XG5cbiAgICAgICAgaWYgKGxpbmVMZW5ndGggPT09IDApIGNvbnRpbnVlO1xuXG4gICAgICAgIGxpbmVGaXJzdENoYXIgPSBsaW5lLmNoYXJBdCgwKTtcblxuICAgICAgICAvLyBAdG9kbyBpbnZva2UgcGFzc2VkIGluIGhhbmRsZXIgaWYgYW55XG4gICAgICAgIGlmIChsaW5lRmlyc3RDaGFyID09PSAnIycpIGNvbnRpbnVlO1xuXG4gICAgICAgIGlmIChsaW5lRmlyc3RDaGFyID09PSAndicpIHtcblxuICAgICAgICAgIGxpbmVTZWNvbmRDaGFyID0gbGluZS5jaGFyQXQoMSk7XG5cbiAgICAgICAgICBpZiAobGluZVNlY29uZENoYXIgPT09ICcgJyAmJiAocmVzdWx0ID0gdGhpcy5yZWdleHAudmVydGV4X3BhdHRlcm4uZXhlYyhsaW5lKSkgIT09IG51bGwpIHtcblxuICAgICAgICAgICAgLy8gMCAgICAgICAgICAgICAgICAgIDEgICAgICAyICAgICAgM1xuICAgICAgICAgICAgLy8gW1widiAxLjAgMi4wIDMuMFwiLCBcIjEuMFwiLCBcIjIuMFwiLCBcIjMuMFwiXVxuXG4gICAgICAgICAgICBzdGF0ZS52ZXJ0aWNlcy5wdXNoKHBhcnNlRmxvYXQocmVzdWx0WzFdKSwgcGFyc2VGbG9hdChyZXN1bHRbMl0pLCBwYXJzZUZsb2F0KHJlc3VsdFszXSkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAobGluZVNlY29uZENoYXIgPT09ICduJyAmJiAocmVzdWx0ID0gdGhpcy5yZWdleHAubm9ybWFsX3BhdHRlcm4uZXhlYyhsaW5lKSkgIT09IG51bGwpIHtcblxuICAgICAgICAgICAgLy8gMCAgICAgICAgICAgICAgICAgICAxICAgICAgMiAgICAgIDNcbiAgICAgICAgICAgIC8vIFtcInZuIDEuMCAyLjAgMy4wXCIsIFwiMS4wXCIsIFwiMi4wXCIsIFwiMy4wXCJdXG5cbiAgICAgICAgICAgIHN0YXRlLm5vcm1hbHMucHVzaChwYXJzZUZsb2F0KHJlc3VsdFsxXSksIHBhcnNlRmxvYXQocmVzdWx0WzJdKSwgcGFyc2VGbG9hdChyZXN1bHRbM10pKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGxpbmVTZWNvbmRDaGFyID09PSAndCcgJiYgKHJlc3VsdCA9IHRoaXMucmVnZXhwLnV2X3BhdHRlcm4uZXhlYyhsaW5lKSkgIT09IG51bGwpIHtcblxuICAgICAgICAgICAgLy8gMCAgICAgICAgICAgICAgIDEgICAgICAyXG4gICAgICAgICAgICAvLyBbXCJ2dCAwLjEgMC4yXCIsIFwiMC4xXCIsIFwiMC4yXCJdXG5cbiAgICAgICAgICAgIHN0YXRlLnV2cy5wdXNoKHBhcnNlRmxvYXQocmVzdWx0WzFdKSwgcGFyc2VGbG9hdChyZXN1bHRbMl0pKTtcbiAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IoXCJVbmV4cGVjdGVkIHZlcnRleC9ub3JtYWwvdXYgbGluZTogJ1wiICsgbGluZSArIFwiJ1wiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobGluZUZpcnN0Q2hhciA9PT0gXCJmXCIpIHtcblxuICAgICAgICAgIGlmICgocmVzdWx0ID0gdGhpcy5yZWdleHAuZmFjZV92ZXJ0ZXhfdXZfbm9ybWFsLmV4ZWMobGluZSkpICE9PSBudWxsKSB7XG5cbiAgICAgICAgICAgIC8vIGYgdmVydGV4L3V2L25vcm1hbCB2ZXJ0ZXgvdXYvbm9ybWFsIHZlcnRleC91di9ub3JtYWxcbiAgICAgICAgICAgIC8vIDAgICAgICAgICAgICAgICAgICAgICAgICAxICAgIDIgICAgMyAgICA0ICAgIDUgICAgNiAgICA3ICAgIDggICAgOSAgIDEwICAgICAgICAgMTEgICAgICAgICAxMlxuICAgICAgICAgICAgLy8gW1wiZiAxLzEvMSAyLzIvMiAzLzMvM1wiLCBcIjFcIiwgXCIxXCIsIFwiMVwiLCBcIjJcIiwgXCIyXCIsIFwiMlwiLCBcIjNcIiwgXCIzXCIsIFwiM1wiLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkXVxuXG4gICAgICAgICAgICBzdGF0ZS5hZGRGYWNlKHJlc3VsdFsxXSwgcmVzdWx0WzRdLCByZXN1bHRbN10sIHJlc3VsdFsxMF0sIHJlc3VsdFsyXSwgcmVzdWx0WzVdLCByZXN1bHRbOF0sIHJlc3VsdFsxMV0sIHJlc3VsdFszXSwgcmVzdWx0WzZdLCByZXN1bHRbOV0sIHJlc3VsdFsxMl0pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoKHJlc3VsdCA9IHRoaXMucmVnZXhwLmZhY2VfdmVydGV4X3V2LmV4ZWMobGluZSkpICE9PSBudWxsKSB7XG5cbiAgICAgICAgICAgIC8vIGYgdmVydGV4L3V2IHZlcnRleC91diB2ZXJ0ZXgvdXZcbiAgICAgICAgICAgIC8vIDAgICAgICAgICAgICAgICAgICAxICAgIDIgICAgMyAgICA0ICAgIDUgICAgNiAgIDcgICAgICAgICAgOFxuICAgICAgICAgICAgLy8gW1wiZiAxLzEgMi8yIDMvM1wiLCBcIjFcIiwgXCIxXCIsIFwiMlwiLCBcIjJcIiwgXCIzXCIsIFwiM1wiLCB1bmRlZmluZWQsIHVuZGVmaW5lZF1cblxuICAgICAgICAgICAgc3RhdGUuYWRkRmFjZShyZXN1bHRbMV0sIHJlc3VsdFszXSwgcmVzdWx0WzVdLCByZXN1bHRbN10sIHJlc3VsdFsyXSwgcmVzdWx0WzRdLCByZXN1bHRbNl0sIHJlc3VsdFs4XSk7XG4gICAgICAgICAgfSBlbHNlIGlmICgocmVzdWx0ID0gdGhpcy5yZWdleHAuZmFjZV92ZXJ0ZXhfbm9ybWFsLmV4ZWMobGluZSkpICE9PSBudWxsKSB7XG5cbiAgICAgICAgICAgIC8vIGYgdmVydGV4Ly9ub3JtYWwgdmVydGV4Ly9ub3JtYWwgdmVydGV4Ly9ub3JtYWxcbiAgICAgICAgICAgIC8vIDAgICAgICAgICAgICAgICAgICAgICAxICAgIDIgICAgMyAgICA0ICAgIDUgICAgNiAgIDcgICAgICAgICAgOFxuICAgICAgICAgICAgLy8gW1wiZiAxLy8xIDIvLzIgMy8vM1wiLCBcIjFcIiwgXCIxXCIsIFwiMlwiLCBcIjJcIiwgXCIzXCIsIFwiM1wiLCB1bmRlZmluZWQsIHVuZGVmaW5lZF1cblxuICAgICAgICAgICAgc3RhdGUuYWRkRmFjZShyZXN1bHRbMV0sIHJlc3VsdFszXSwgcmVzdWx0WzVdLCByZXN1bHRbN10sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgcmVzdWx0WzJdLCByZXN1bHRbNF0sIHJlc3VsdFs2XSwgcmVzdWx0WzhdKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKChyZXN1bHQgPSB0aGlzLnJlZ2V4cC5mYWNlX3ZlcnRleC5leGVjKGxpbmUpKSAhPT0gbnVsbCkge1xuXG4gICAgICAgICAgICAvLyBmIHZlcnRleCB2ZXJ0ZXggdmVydGV4XG4gICAgICAgICAgICAvLyAwICAgICAgICAgICAgMSAgICAyICAgIDMgICA0XG4gICAgICAgICAgICAvLyBbXCJmIDEgMiAzXCIsIFwiMVwiLCBcIjJcIiwgXCIzXCIsIHVuZGVmaW5lZF1cblxuICAgICAgICAgICAgc3RhdGUuYWRkRmFjZShyZXN1bHRbMV0sIHJlc3VsdFsyXSwgcmVzdWx0WzNdLCByZXN1bHRbNF0pO1xuICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIHRoaXMub25FcnJvcihcIlVuZXhwZWN0ZWQgZmFjZSBsaW5lOiAnXCIgKyBsaW5lICsgXCInXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChsaW5lRmlyc3RDaGFyID09PSBcImxcIikge1xuXG4gICAgICAgICAgdmFyIGxpbmVQYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKDEpLnRyaW0oKS5zcGxpdChcIiBcIik7XG4gICAgICAgICAgdmFyIGxpbmVWZXJ0aWNlcyA9IFtdLFxuICAgICAgICAgICAgICBsaW5lVVZzID0gW107XG5cbiAgICAgICAgICBpZiAobGluZS5pbmRleE9mKFwiL1wiKSA9PT0gLTEpIHtcblxuICAgICAgICAgICAgbGluZVZlcnRpY2VzID0gbGluZVBhcnRzO1xuICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGxpID0gMCwgbGxlbiA9IGxpbmVQYXJ0cy5sZW5ndGg7IGxpIDwgbGxlbjsgbGkrKykge1xuXG4gICAgICAgICAgICAgIHZhciBwYXJ0cyA9IGxpbmVQYXJ0c1tsaV0uc3BsaXQoXCIvXCIpO1xuXG4gICAgICAgICAgICAgIGlmIChwYXJ0c1swXSAhPT0gXCJcIikgbGluZVZlcnRpY2VzLnB1c2gocGFydHNbMF0pO1xuICAgICAgICAgICAgICBpZiAocGFydHNbMV0gIT09IFwiXCIpIGxpbmVVVnMucHVzaChwYXJ0c1sxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0YXRlLmFkZExpbmVHZW9tZXRyeShsaW5lVmVydGljZXMsIGxpbmVVVnMpO1xuICAgICAgICB9IGVsc2UgaWYgKChyZXN1bHQgPSB0aGlzLnJlZ2V4cC5vYmplY3RfcGF0dGVybi5leGVjKGxpbmUpKSAhPT0gbnVsbCkge1xuXG4gICAgICAgICAgLy8gbyBvYmplY3RfbmFtZVxuICAgICAgICAgIC8vIG9yXG4gICAgICAgICAgLy8gZyBncm91cF9uYW1lXG5cbiAgICAgICAgICAvLyBXT1JLQVJPVU5EOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yODY5XG4gICAgICAgICAgLy8gdmFyIG5hbWUgPSByZXN1bHRbIDAgXS5zdWJzdHIoIDEgKS50cmltKCk7XG4gICAgICAgICAgdmFyIG5hbWUgPSAoXCIgXCIgKyByZXN1bHRbMF0uc3Vic3RyKDEpLnRyaW0oKSkuc3Vic3RyKDEpO1xuXG4gICAgICAgICAgc3RhdGUuc3RhcnRPYmplY3QobmFtZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZWdleHAubWF0ZXJpYWxfdXNlX3BhdHRlcm4udGVzdChsaW5lKSkge1xuXG4gICAgICAgICAgLy8gbWF0ZXJpYWxcblxuICAgICAgICAgIHN0YXRlLm9iamVjdC5zdGFydE1hdGVyaWFsKGxpbmUuc3Vic3RyaW5nKDcpLnRyaW0oKSwgc3RhdGUubWF0ZXJpYWxMaWJyYXJpZXMpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVnZXhwLm1hdGVyaWFsX2xpYnJhcnlfcGF0dGVybi50ZXN0KGxpbmUpKSB7XG5cbiAgICAgICAgICAvLyBtdGwgZmlsZVxuXG4gICAgICAgICAgc3RhdGUubWF0ZXJpYWxMaWJyYXJpZXMucHVzaChsaW5lLnN1YnN0cmluZyg3KS50cmltKCkpO1xuICAgICAgICB9IGVsc2UgaWYgKChyZXN1bHQgPSB0aGlzLnJlZ2V4cC5zbW9vdGhpbmdfcGF0dGVybi5leGVjKGxpbmUpKSAhPT0gbnVsbCkge1xuXG4gICAgICAgICAgLy8gc21vb3RoIHNoYWRpbmdcblxuICAgICAgICAgIC8vIEB0b2RvIEhhbmRsZSBmaWxlcyB0aGF0IGhhdmUgdmFyeWluZyBzbW9vdGggdmFsdWVzIGZvciBhIHNldCBvZiBmYWNlcyBpbnNpZGUgb25lIGdlb21ldHJ5LFxuICAgICAgICAgIC8vIGJ1dCBkb2VzIG5vdCBkZWZpbmUgYSB1c2VtdGwgZm9yIGVhY2ggZmFjZSBzZXQuXG4gICAgICAgICAgLy8gVGhpcyBzaG91bGQgYmUgZGV0ZWN0ZWQgYW5kIGEgZHVtbXkgbWF0ZXJpYWwgY3JlYXRlZCAobGF0ZXIgTXVsdGlNYXRlcmlhbCBhbmQgZ2VvbWV0cnkgZ3JvdXBzKS5cbiAgICAgICAgICAvLyBUaGlzIHJlcXVpcmVzIHNvbWUgY2FyZSB0byBub3QgY3JlYXRlIGV4dHJhIG1hdGVyaWFsIG9uIGVhY2ggc21vb3RoIHZhbHVlIGZvciBcIm5vcm1hbFwiIG9iaiBmaWxlcy5cbiAgICAgICAgICAvLyB3aGVyZSBleHBsaWNpdCB1c2VtdGwgZGVmaW5lcyBnZW9tZXRyeSBncm91cHMuXG4gICAgICAgICAgLy8gRXhhbXBsZSBhc3NldDogZXhhbXBsZXMvbW9kZWxzL29iai9jZXJiZXJ1cy9DZXJiZXJ1cy5vYmpcblxuICAgICAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdFsxXS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICBzdGF0ZS5vYmplY3Quc21vb3RoID0gdmFsdWUgPT09ICcxJyB8fCB2YWx1ZSA9PT0gJ29uJztcblxuICAgICAgICAgIHZhciBtYXRlcmlhbCA9IHN0YXRlLm9iamVjdC5jdXJyZW50TWF0ZXJpYWwoKTtcbiAgICAgICAgICBpZiAobWF0ZXJpYWwpIHtcblxuICAgICAgICAgICAgbWF0ZXJpYWwuc21vb3RoID0gc3RhdGUub2JqZWN0LnNtb290aDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAvLyBIYW5kbGUgbnVsbCB0ZXJtaW5hdGVkIGZpbGVzIHdpdGhvdXQgZXhjZXB0aW9uXG4gICAgICAgICAgaWYgKGxpbmUgPT09ICdcXDAnKSBjb250aW51ZTtcblxuICAgICAgICAgIHRoaXMub25FcnJvcihcIlVuZXhwZWN0ZWQgbGluZTogJ1wiICsgbGluZSArIFwiJ1wiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzdGF0ZS5maW5hbGl6ZSgpO1xuXG4gICAgICB2YXIgY29udGFpbmVyID0gbmV3IFRIUkVFLkdyb3VwKCk7XG4gICAgICBjb250YWluZXIubWF0ZXJpYWxMaWJyYXJpZXMgPSBbXS5jb25jYXQoc3RhdGUubWF0ZXJpYWxMaWJyYXJpZXMpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0YXRlLm9iamVjdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cbiAgICAgICAgdmFyIG9iamVjdCA9IHN0YXRlLm9iamVjdHNbaV07XG4gICAgICAgIHZhciBnZW9tZXRyeSA9IG9iamVjdC5nZW9tZXRyeTtcbiAgICAgICAgdmFyIG1hdGVyaWFscyA9IG9iamVjdC5tYXRlcmlhbHM7XG4gICAgICAgIHZhciBpc0xpbmUgPSBnZW9tZXRyeS50eXBlID09PSAnTGluZSc7XG5cbiAgICAgICAgLy8gU2tpcCBvL2cgbGluZSBkZWNsYXJhdGlvbnMgdGhhdCBkaWQgbm90IGZvbGxvdyB3aXRoIGFueSBmYWNlc1xuICAgICAgICBpZiAoZ2VvbWV0cnkudmVydGljZXMubGVuZ3RoID09PSAwKSBjb250aW51ZTtcblxuICAgICAgICB2YXIgYnVmZmVyZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTtcblxuICAgICAgICBidWZmZXJnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KGdlb21ldHJ5LnZlcnRpY2VzKSwgMykpO1xuXG4gICAgICAgIGlmIChnZW9tZXRyeS5ub3JtYWxzLmxlbmd0aCA+IDApIHtcblxuICAgICAgICAgIGJ1ZmZlcmdlb21ldHJ5LmFkZEF0dHJpYnV0ZSgnbm9ybWFsJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KGdlb21ldHJ5Lm5vcm1hbHMpLCAzKSk7XG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICBidWZmZXJnZW9tZXRyeS5jb21wdXRlVmVydGV4Tm9ybWFscygpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGdlb21ldHJ5LnV2cy5sZW5ndGggPiAwKSB7XG5cbiAgICAgICAgICBidWZmZXJnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoJ3V2JywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KGdlb21ldHJ5LnV2cyksIDIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBtYXRlcmlhbHNcblxuICAgICAgICB2YXIgY3JlYXRlZE1hdGVyaWFscyA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIG1pID0gMCwgbWlMZW4gPSBtYXRlcmlhbHMubGVuZ3RoOyBtaSA8IG1pTGVuOyBtaSsrKSB7XG5cbiAgICAgICAgICB2YXIgc291cmNlTWF0ZXJpYWwgPSBtYXRlcmlhbHNbbWldO1xuICAgICAgICAgIHZhciBtYXRlcmlhbCA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgIGlmICh0aGlzLm1hdGVyaWFscyAhPT0gbnVsbCkge1xuXG4gICAgICAgICAgICBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxzLmNyZWF0ZShzb3VyY2VNYXRlcmlhbC5uYW1lKTtcblxuICAgICAgICAgICAgLy8gbXRsIGV0Yy4gbG9hZGVycyBwcm9iYWJseSBjYW4ndCBjcmVhdGUgbGluZSBtYXRlcmlhbHMgY29ycmVjdGx5LCBjb3B5IHByb3BlcnRpZXMgdG8gYSBsaW5lIG1hdGVyaWFsLlxuICAgICAgICAgICAgaWYgKGlzTGluZSAmJiBtYXRlcmlhbCAmJiAhKG1hdGVyaWFsIGluc3RhbmNlb2YgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwpKSB7XG5cbiAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsTGluZSA9IG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCgpO1xuICAgICAgICAgICAgICBtYXRlcmlhbExpbmUuY29weShtYXRlcmlhbCk7XG4gICAgICAgICAgICAgIG1hdGVyaWFsID0gbWF0ZXJpYWxMaW5lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghbWF0ZXJpYWwpIHtcblxuICAgICAgICAgICAgbWF0ZXJpYWwgPSAhaXNMaW5lID8gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKCkgOiBuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoKTtcbiAgICAgICAgICAgIG1hdGVyaWFsLm5hbWUgPSBzb3VyY2VNYXRlcmlhbC5uYW1lO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG1hdGVyaWFsLnNoYWRpbmcgPSBzb3VyY2VNYXRlcmlhbC5zbW9vdGggPyBUSFJFRS5TbW9vdGhTaGFkaW5nIDogVEhSRUUuRmxhdFNoYWRpbmc7XG5cbiAgICAgICAgICBjcmVhdGVkTWF0ZXJpYWxzLnB1c2gobWF0ZXJpYWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIG1lc2hcblxuICAgICAgICB2YXIgbWVzaDtcblxuICAgICAgICBpZiAoY3JlYXRlZE1hdGVyaWFscy5sZW5ndGggPiAxKSB7XG5cbiAgICAgICAgICBmb3IgKHZhciBtaSA9IDAsIG1pTGVuID0gbWF0ZXJpYWxzLmxlbmd0aDsgbWkgPCBtaUxlbjsgbWkrKykge1xuXG4gICAgICAgICAgICB2YXIgc291cmNlTWF0ZXJpYWwgPSBtYXRlcmlhbHNbbWldO1xuICAgICAgICAgICAgYnVmZmVyZ2VvbWV0cnkuYWRkR3JvdXAoc291cmNlTWF0ZXJpYWwuZ3JvdXBTdGFydCwgc291cmNlTWF0ZXJpYWwuZ3JvdXBDb3VudCwgbWkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBtdWx0aU1hdGVyaWFsID0gbmV3IFRIUkVFLk11bHRpTWF0ZXJpYWwoY3JlYXRlZE1hdGVyaWFscyk7XG4gICAgICAgICAgbWVzaCA9ICFpc0xpbmUgPyBuZXcgVEhSRUUuTWVzaChidWZmZXJnZW9tZXRyeSwgbXVsdGlNYXRlcmlhbCkgOiBuZXcgVEhSRUUuTGluZVNlZ21lbnRzKGJ1ZmZlcmdlb21ldHJ5LCBtdWx0aU1hdGVyaWFsKTtcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIG1lc2ggPSAhaXNMaW5lID8gbmV3IFRIUkVFLk1lc2goYnVmZmVyZ2VvbWV0cnksIGNyZWF0ZWRNYXRlcmlhbHNbMF0pIDogbmV3IFRIUkVFLkxpbmVTZWdtZW50cyhidWZmZXJnZW9tZXRyeSwgY3JlYXRlZE1hdGVyaWFsc1swXSk7XG4gICAgICAgIH1cblxuICAgICAgICBtZXNoLm5hbWUgPSBvYmplY3QubmFtZTtcblxuICAgICAgICBjb250YWluZXIuYWRkKG1lc2gpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGVidWcpIHtcbiAgICAgICAgY29uc29sZS50aW1lRW5kKCdPQkpMb2FkZXInKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgfTtcbn07Il0sInNvdXJjZVJvb3QiOiIifQ==